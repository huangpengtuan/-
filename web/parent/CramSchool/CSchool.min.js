(function(angular){'use strict';angular.module('MCSchool',['ngRoute']).directive('onFinishRender',function($timeout){return{restrict:'A',link:function(scope,element,attr){if(scope.$last===true){$timeout(function(){scope.$emit('ngRepeatFinished')})}}}}).config(['$routeProvider',function($routeProvider){$routeProvider .when('/CSchool/',{templateUrl:'CramSchool/CramSchool.html',controller:'CSchoolCtl'}).when('/Cdetails/:ID',{templateUrl:'CramSchool/Cramdetails.html',controller:'CdetailsCtl'}).when('/curriculum/:ID',{templateUrl:'CramSchool/curriculum.html',controller:'curriculumCtl'}).when('/Reports/:ID',{templateUrl:'CramSchool/Report.html',controller:'ReportCtl'}).when('/ACinsure/',{templateUrl:'CramSchool/ACinsure.html',controller:'ACinsureCtl'}).when('/SCart/',{templateUrl:'CramSchool/ShoppingCart.html',controller:'SCartCtl'}).when('/Order/',{templateUrl:'CramSchool/Order.html',controller:'OrderCtl'}).when('/paySuccess/:ID',{templateUrl:'CramSchool/paySuccess.html',controller:'paySuccessCtl'}).when('/payFail/',{templateUrl:'CramSchool/payFail.html',controller:'payFailCtl'}).when('/SAS/:ID',{templateUrl:'CramSchool/SubjectAndStudy.html',controller:'SubjectAndStudyCtl'}).when('/InterestCram/:ID',{templateUrl:'CramSchool/InterestCram.html',controller:'InterestCramCtl'})}]).controller('CSchoolCtl',['$scope',function($scope){tabsfn('zoneBody','.zoneBody','.zoneBody01','tabItemactive');tabsfn('regionBody','.regionBody','.regionBody01','tabItemactive');$scope.ifAreas='';$scope.ifAreasname='';$.post("/p/getParentHome",{},function(data){$scope.ifAreas=data.content.parent_follow_area;if($scope.ifAreas){$scope.ifAreasname=data.content.parent_follow_area_name}else{$scope.ifAreasname='深圳市';$scope.ifAreas=440300}var page=1;var keyWord=$('#keyWords').val();var dataArry={'pageIndex':page,'pageSize':count,'areaId':$scope.ifAreas,'keyWord':keyWord};$('#CSchools').empty();getcramschoollist(dataArry);$scope.$apply()});$scope.search=function(){var keyWord=$('#keyWords').val();var areaid=$('#area_id').val();$("#CSchools").empty();page=1;var dataArry={'pageIndex':page,'pageSize':count,'areaId':areaid,'keyWord':keyWord,};$('#CSchools').empty();getcramschoollist(dataArry)};$scope.inderBanner='';$.ajax({type:"post",url:"/cramSchool/getSchoolBannerByCategoryType",data:{'categoryType':'补习班列表'},datatype:"json",success:function(data){$scope.inderBanner=data.object;console.log(data);$scope.$apply()}});$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){var swiper01=new Swiper('.swiper-container',{pagination:'.swiper-pagination',paginationClickable:true,grabCursor:true,touchRatio:0.5,autoplay:3000,loop:true})});$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()==$(document).height()+5){page+=1;if(page==2){$("#CSchools").empty()}var areaid=$('#area_id').val();var keyWord=$('#keyWords').val();var dataArry={'pageIndex':page,'pageSize':count,'areaId':areaid,'keyWord':keyWord,};$.ajax({type:"post",url:"/cramSchool/getSchoolList",data:dataArry,datatype:"json",success:function(data){listsplits(data.object);$("#CSchools").show();if(data.object.length==0){$("#getmorefalse").fadeIn();setTimeout(function(){$("#getmorefalse").fadeOut()},650)}}})}})}]).controller('CdetailsCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.cramSchoolId=$routeParams.ID;tabsfn('CDtabs','.CDtabs','.CDtabs1','CDactive');tabsfn('tabBody','.tabBody','.tabBody01','cramdetailactive');$scope.stars='';$scope.groups1='';$scope.groupcurri='';$scope.starslistA=[];var starsI='';$scope.quality_score='';$scope.quality_score01='';$scope.service_score='';$scope.service_score01='';$.ajax({type:"post",url:"/cramSchool/getCramSchoolById",data:{'schoolId':$scope.cramSchoolId},datatype:"json",success:function(data){$scope.starslistA=[];console.log(data.object);$scope.CramData=data.object;$scope.groups1=data.object.groups[0];$scope.groups1.id=data.object.groups[0].id;if($scope.CramData.eva_star*10%10<=2&&$scope.CramData.eva_star*10%10!=0){$scope.stars='img/start2.png'}else if($scope.CramData.eva_star*10%10<=5&&$scope.CramData.eva_star*10%10!=0){$scope.stars='img/start5.png'}else if($scope.CramData.eva_star*10%10<=9&&$scope.CramData.eva_star*10%10!=0){$scope.stars='img/start8.png'}else if($scope.CramData.eva_star==5){$scope.stars='img/start10.png'}else{$scope.stars='img/start0.png'}$scope.quality_score=data.object.quality_score;if($scope.quality_score*10%10<=2&&$scope.quality_score*10%10!=0){$scope.quality_score01='img/start2.png'}else if($scope.quality_score*10%10<=5&&$scope.quality_score*10%10!=0){$scope.quality_score01='img/start5.png'}else if($scope.quality_score*10%10<=9&&$scope.quality_score*10%10!=0){$scope.quality_score01='img/start8.png'}else if($scope.quality_score==5){$scope.quality_score01='img/start10.png'}else{$scope.quality_score01='img/start0.png'}$scope.service_score=data.object.service_score;if($scope.service_score*10%10<=2&&$scope.service_score*10%10!=0){$scope.service_score01='img/start2.png'}else if($scope.service_score*10%10<=5&&$scope.service_score*10%10!=0){$scope.service_score01='img/start5.png'}else if($scope.service_score*10%10<=9&&$scope.service_score*10%10!=0){$scope.service_score01='img/start8.png'}else if($scope.service_score==5){$scope.service_score01='img/start10.png'}else{$scope.service_score01='img/start0.png'}$.ajax({type:"post",url:"/cramCourse/getCramCourse",data:{"schoolId":$scope.cramSchoolId,"groupId":$scope.groups1.id,},datatype:"json",success:function(data){$scope.groupcurri=data.object.list;for(var i=0;i<$scope.groupcurri.length;i+=1){if($scope.groupcurri[i].composite_score*10%10<=2&&$scope.groupcurri[i].composite_score*10%10!=0){starsI='img/start2.png'}else if($scope.groupcurri[i].composite_score*10%10<=5&&$scope.groupcurri[i].composite_score*10%10!=0){starsI='img/start5.png'}else if($scope.groupcurri[i].composite_score*10%10<=9&&$scope.groupcurri[i].composite_score*10%10!=0){starsI='img/start8.png'}else if($scope.groupcurri[0].composite_score==5){starsI='img/start10.png'}else{starsI='img/start0.png'}$scope.starslistA.push(starsI);$scope.$apply()}}});$scope.$apply()}});$scope.fgcurri=function(schoolId,groupID,$event){var groupID=groupID;var schoolId=schoolId;$scope.starslistA=[];$.ajax({type:"post",url:"/cramCourse/getCramCourse",data:{"schoolId":schoolId,"groupId":groupID,},datatype:"json",success:function(data){$scope.groupcurri=data.object.list;for(var i=0;i<$scope.groupcurri.length;i+=1){if($scope.groupcurri[i].composite_score*10%10<=2&&$scope.groupcurri[i].composite_score*10%10!=0){starsI='img/start2.png'}else if($scope.groupcurri[i].composite_score*10%10<=5&&$scope.groupcurri[i].composite_score*10%10!=0){starsI='img/start5.png'}else if($scope.groupcurri[i].composite_score*10%10<=9&&$scope.groupcurri[i].composite_score*10%10!=0){starsI='img/start8.png'}else if($scope.groupcurri[i].composite_score==5){starsI='img/start10.png'}else{starsI='img/start0.png'}$scope.starslistA.push(starsI)}$scope.$apply()}});$('.tabBody').removeClass('cramdetailactive');$($event.target).addClass("cramdetailactive")};$scope.gocurriculum=function(curriID){$location.path('/curriculum/'+curriID)};$scope.count=0;$scope.totalPrice=0;$.ajax({type:"post",url:"/shoppingCart/getCarData",data:{'productType':1,},datatype:"json",success:function(data){$scope.count=data.object.count;$scope.totalPrice=data.object.totalPrice;$scope.$apply()}});$scope.joinshoppingcart=function(goodstype,goodsID){$('#BottomCart').fadeIn();$.ajax({type:"post",url:"/shoppingCart/addCart",data:{'c.product_type':goodstype,'c.product_id':goodsID,'c.count':1,},datatype:"json",success:function(data){$scope.count=data.object.count;$scope.totalPrice=data.object.totalPrice;$scope.$apply()}})};var EvpageSize=20;var EvpageIndex=1;$scope.EvaluateList='';$scope.totalRow='';$.ajax({type:"post",url:"/courseEvaluate/getEvaluateList",data:{'schoolId':$scope.cramSchoolId,'pageIndex':1,'pageSize':20},datatype:"json",success:function(data){$scope.totalRow=data.object.totalRow;$scope.EvaluateList=data.object.list;$scope.$apply()}});$scope.CCDfilmFadeIn=function(){$('.cramClassfilm').fadeIn()};$scope.CCDfilmFadeOut=function(){$('.cramClassfilm').fadeOut()};$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()==$(document).height()){EvpageSize+=20;$.ajax({type:"post",url:"/courseEvaluate/getEvaluateList",data:{'schoolId':$scope.cramSchoolId,'pageIndex':EvpageIndex,'pageSize':EvpageSize},datatype:"json",success:function(data){$scope.EvaluateList=data.object.list;$scope.$apply()}})}})}]).controller('curriculumCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.curriId=$routeParams.ID;$scope.stars='';$scope.curriobject='';$.ajax({type:"post",url:"/cramCourse/getCourse",data:{'courseId':$scope.curriId,},datatype:"json",success:function(data){$scope.curriobject=data.object;if(data.object.composite_score*10%10<=2&&data.object.composite_score*10%10!=0){$scope.stars='img/start2.png'}else if(data.object.composite_score*10%10<=5&&data.object.composite_score*10%10!=0){$scope.stars='img/start5.png'}else if(data.object.composite_score*10%10<=9&&data.object.composite_score*10%10!=0){$scope.stars='img/start8.png'}else if(data.object.composite_score==5){$scope.stars='img/start10.png'}else{$scope.stars='img/start0.png'}if(data.object.isFavorite){$('.Collect').attr({class:"icon-Collect Collect"})}else if(!data.object.isFavorite){$('.Collect').attr({class:"icon-cramDe-c Collect"})}$scope.$apply();wxShareCurrentPage($scope.curriobject.course_name,$scope.curriobject.introduction)}});$scope.paycurri=function(){localStorage.setItem("courseIdsArry",$scope.curriId);$location.path('/Order/')};$scope.Collect=function(){if($('.Collect').hasClass("icon-cramDe-c")){$('.Collect').attr({class:"icon-Collect CollectCheck Collect"});$.ajax({type:"post",url:"/favorite/addFavorite",data:{'goalId':$scope.curriId,'type':1,'url':window.location.href},datatype:"json",success:function(data){}})}else if($('.Collect').hasClass("icon-Collect")){$('.Collect').attr({class:"icon-cramDe-c Collect"});$.ajax({type:"post",url:"/favorite/cancelFavorite",data:{'goalId':$scope.curriId,'type':1,},datatype:"json",success:function(data){}})}};var EvpageSize=20;var EvpageIndex=1;$scope.EvaluateList='';$scope.totalRow='';$.ajax({type:"post",url:"/courseEvaluate/getEvaluateList",data:{'cramCourseId':$scope.curriId,'pageIndex':1,'pageSize':20},datatype:"json",success:function(data){$scope.totalRow=data.object.totalRow;$scope.EvaluateList=data.object.list;$scope.$apply()}});$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()==$(document).height()){EvpageSize+=20;$.ajax({type:"post",url:"/courseEvaluate/getEvaluateList",data:{'cramCourseId':$scope.curriId,'pageIndex':EvpageIndex,'pageSize':EvpageSize},datatype:"json",success:function(data){$scope.EvaluateList=data.object.list;$scope.$apply()}})}})}]).controller('ReportCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.cramSchoolId=$routeParams.ID;$('.reports-Li').click(function(){$(this).toggleClass('tabItemactive')})}]).controller('ACinsureCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var orderIdsArry=localStorage.getItem("orderIds");var applystates=document.getElementsByClassName("AC-Text02");for(var i=0;i<applystates.length;i+=1){applystates[i].onclick=function(){var indexx=$(".AC-Text02").index($(this));for(var i=0;i<applystates.length;i+=1){$(".AC-Text02").removeClass("AC-active");$(".icon-Uncheck").removeClass("AC-check")}$(this).addClass("AC-active");$(".icon-Uncheck").eq(indexx).addClass("AC-check")}}$scope.teacher_phone='';$scope.balance='';$scope.margin='';$.ajax({type:"post",url:"/order/getOrderAmount",data:{'orderIds':orderIdsArry},datatype:"json",success:function(data){$scope.margin=data.object.amount;$scope.balance=data.object.balance;$scope.$apply()}});$scope.applyStyle=1;$scope.applystateWaY=function(e){$scope.applyStyle=e};$scope.submitCrams=function(){if($scope.applyStyle==1){window.location.href="/c/pay/payForOrder?orderIds="+orderIdsArry}else if($scope.applyStyle==2){$.ajax({type:"post",url:"/order/balancePayOrder",data:{"orderIds":orderIdsArry,},datatype:"json",success:function(data){if(data.isSuccess){$location.path('/paySuccess/'+orderIdsArry)}else if(!data.isSuccess){$location.path('/payFail/')}$scope.$apply()}})}}}]).controller('SCartCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){tabsfn('SCart-tabs','.SCart-tabs','.SCart-tabs01','SCactive');$scope.CartLists='';$.ajax({type:"post",url:"/shoppingCart/getCartList",data:{'type':1},datatype:"json",success:function(data){$scope.CartLists=data.object;$scope.$apply()}});$scope.deleteFN=function(currid){$.ajax({type:"post",url:"/shoppingCart/deleteProductByCart",data:{'productType':1,'productId':currid},datatype:"json",success:function(data){$scope.CartLists=data.object;sumamount();$scope.$apply();jiajian();scartdelete('.SC-container');checkFN()}})};$scope.totalPrice=0;$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){scartdelete('.SC-container');jiajian();checkFN();listArry=[];sumamount()})}]).controller('OrderCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var courseIdsArry=localStorage.getItem("courseIdsArry");$scope.orderlist='';$scope.discountTotal='';$scope.originalTotal='';$scope.paymentAmount='';$.ajax({type:"post",url:"/cramCourse/buyCourse",data:{'courseIds':courseIdsArry},datatype:"json",success:function(data){$scope.orderlist=data.object.courses_list;$scope.discountTotal=data.object.discountTotal;$scope.originalTotal=data.object.originalTotal;$scope.paymentAmount=data.object.paymentAmount;$scope.$apply()}});$scope.submitOrders=function(){$.ajax({type:"post",url:"/order/submitOrderForCourse",data:{'courseIds':courseIdsArry},datatype:"json",success:function(data){if(data.isSuccess){localStorage.setItem("orderIds",data.object);$location.path('/ACinsure/')}else{alert(data.msg)}$scope.$apply()}})}}]).controller('paySuccessCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var Oid=$routeParams.ID;$scope.amount='';$scope.in_time='';$scope.pay_time='';$.ajax({type:"post",url:"/order/getOrderPaySuccessInfo",data:{'orderIds':Oid,},datatype:"json",success:function(data){$scope.amount=data.object.amount;$scope.in_time=data.object.in_time;$scope.pay_time=data.object.pay_time;$scope.$apply()}});$scope.gohomes=function(){$location.path('/home/')};$scope.goMyOrders=function(){$location.path('/MyOrders/')}}]).controller('payFailCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.gohomes=function(){$location.path('/home/')};$scope.goback=function(){window.history.back()}}]).controller('SubjectAndStudyCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.CramStyle=$routeParams.ID;$scope.goback=function(){window.history.back()};var CDtabs=document.getElementsByClassName('njhBody');for(var i=0;i<CDtabs.length;i+=1){CDtabs[i].onclick=function(){var indexx=$('.njhBody').index($(this));for(var i=0;i<CDtabs.length;i+=1){$('.njhBody').removeClass('CSSearchActive');$('.njhBody01').removeClass("active");$('.cstabimgb').removeClass("cstabimgbActive")}$(this).addClass('CSSearchActive');$('.njhBody01').eq(indexx).addClass("active");$('.njhBody01').eq(0).removeClass("active");$('.cstabimgb').eq(indexx).addClass("cstabimgbActive");$('.njhTabs').addClass('njhTabsActive');$('#CSchools').hide()}}tabsfn('zoneBody','.zoneBody','.zoneBody01','tabItemactive');tabsfn('SubjectBody','.SubjectBody','.SubjectBody01','tabItemactive');$scope.freeAx=function($event){var activityID=$($event.target).attr('data-name');$('.screenList01').removeClass('shaixuanActive');$($event.target).addClass('shaixuanActive');$('#activity').val(activityID)};$scope.SexAx=function($event){var sexID=$($event.target).attr('data-name');$('.screenList02').removeClass('shaixuanActive');$($event.target).addClass('shaixuanActive');$('#teacherSex').val(sexID)};$scope.EmptySX=function(){$('.screenList01').removeClass('shaixuanActive');$('.screenList02').removeClass('shaixuanActive');$('#activity').val('');$('#teacherSex').val('')};$scope.GetSX=function(){page=1;var areaid=$('#area_id').val();var subjectId=$('#subjectId').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'subjectId':subjectId,'order':order,'activity':activity,'teacherSex':teacherSex};$('#CSchools').empty();$('.njhBody01').eq(3).removeClass('active');getcramschoollist(dataArry)};page=1;var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle};getcramschoollist(dataArry);$scope.allsubject=function($event,ctype,eclass){var changename=$($event.target).attr('data-name');var changeid=$($event.target).attr('data-cityid');$('.njhBodyname').eq(ctype).html(changename);$('.smjj-change').eq(ctype).val(changeid);page=1;var areaid=$('#area_id').val();var subjectId=$('#subjectId').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'subjectId':subjectId,'order':order,'activity':activity,'teacherSex':teacherSex};$("#CSchools").empty();getcramschoollist(dataArry);setTimeout(function(){$('.njhBody01').removeClass('active');$('.njhBody').eq(ctype).removeClass('CSSearchActive');$('.njhTabs').removeClass('njhTabsActive');$('.cstabimgb').eq(ctype).removeClass("cstabimgbActive")},600)};$scope.njhscreen=function($event,ctype,eclass){var changeID=$($event.target).attr('data-cityid');if(eclass){$(eclass).removeClass('tabItemactive');$($event.target).toggleClass('tabItemactive')}var changename=$($event.target).attr('data-name');var changeid=$($event.target).attr('data-cityid');$('.njhBodyname').eq(ctype).empty();$('.njhBodyname').eq(ctype).html(changename);$('.smjj-change').eq(ctype).val(changeid);page=1;var areaid=$('#area_id').val();var subjectId=$('#subjectId').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'subjectId':subjectId,'order':order,'activity':activity,'teacherSex':teacherSex};$("#CSchools").empty();getcramschoollist(dataArry);setTimeout(function(){$('.njhBody01').removeClass('active');$('.njhBody').eq(ctype).removeClass('CSSearchActive');$('.njhTabs').removeClass('njhTabsActive');$('.cstabimgb').eq(ctype).removeClass("cstabimgbActive")},600)};$scope.searchHistory='';$scope.SearchMask=function(){$.ajax({type:"post",url:"/cramSchool/getSchoolSearchHistory",data:{},datatype:"json",success:function(data){$scope.searchHistory=data.object;console.log($scope.searchHistory);$scope.$apply()}});$('#zone').fadeOut();$('#InterSearchMask').fadeIn()};$scope.gobackfalse=function(){$('#zone').fadeIn();$('#InterSearchMask').fadeOut();$('#IntS_in').val('')};$scope.goSearch=function(){var keyWord=$('#IntS_in').val();var areaid=$('#area_id').val();$("#CSchools").empty();page=1;var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'keyWord':keyWord,};$('#CSchools').empty();getcramschoollist(dataArry);$('#zone').fadeIn();$('#InterSearchMask').fadeOut();setTimeout(function(){$('#IntS_in').val('')},500)};$scope.HistorySearch=function($event){var keyWord=$($event.target).html();var areaid=$('#area_id').val();$("#CSchools").empty();page=1;var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'keyWord':keyWord,};$('#CSchools').empty();getcramschoollist(dataArry);$('#zone').fadeIn();$('#InterSearchMask').fadeOut()};$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()==$(document).height()+5){page+=1;if(page==2){$("#CSchools").empty()}var areaid=$('#area_id').val();var subjectId=$('#subjectId').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':1,'areaId':areaid,'subjectId':subjectId,'order':order,'activity':activity,'teacherSex':teacherSex};$.ajax({type:"post",url:"/cramSchool/getSchoolList",data:dataArry,datatype:"json",success:function(data){listsplits(data.object);$("#CSchools").show();if(data.object.length==0){$("#getmorefalse").fadeIn();setTimeout(function(){$("#getmorefalse").fadeOut()},650)}}})}})}]).controller('InterestCramCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.CramStyle=$routeParams.ID;$scope.CramProject='';var ProjectTotal='';$.ajax({type:"post",url:"/subject/getSubjectListByType",data:{'schoolTypeId':$scope.CramStyle},datatype:"json",success:function(data){$scope.CramProject=data.object;ProjectTotal=data.object.length;$scope.$apply()}});$scope.goback=function(){window.history.back()};var CDtabs=document.getElementsByClassName('njhBody');for(var i=0;i<CDtabs.length;i+=1){CDtabs[i].onclick=function(){var indexx=$('.njhBody').index($(this));for(var i=0;i<CDtabs.length;i+=1){$('.njhBody').removeClass('InterActive');$('.njhBody01').removeClass("active");$('.cstabimgb').removeClass("cstabimgbActive")}$(this).addClass('InterActive');if(indexx==1){$('.njhBody01').eq(1).removeClass("active");$('.njhBody01').eq(1).val('1');page=1;var areaid=$('#area_id').val();var subjectId=$('#subjectId').val();var distanceRecent=$('#distanceRecent').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'subjectId':subjectId,'distanceRecent':1,'order':order,'activity':activity,'teacherSex':teacherSex};$('#CSchools').empty();$('.njhBody01').eq(3).removeClass('active');getcramschoollist(dataArry)}else{$('.njhBody01').eq(indexx).addClass("active")}$('.njhBody01').eq(0).removeClass("active");$('.cstabimgb').eq(indexx).addClass("cstabimgbActive");$('#CSchools').hide()}}tabsfn('zoneBody','.zoneBody','.zoneBody01','tabItemactive');$scope.freeAx=function($event){var activityID=$($event.target).attr('data-name');$('.screenList01').removeClass('shaixuanActive');$($event.target).addClass('shaixuanActive');$('#activity').val(activityID)};$scope.SexAx=function($event){var sexID=$($event.target).attr('data-name');$('.screenList02').removeClass('shaixuanActive');$($event.target).addClass('shaixuanActive');$('#teacherSex').val(sexID)};$scope.EmptySX=function(){$('.screenList01').removeClass('shaixuanActive');$('.screenList02').removeClass('shaixuanActive');$('#activity').val('');$('#teacherSex').val('');$('.njhBody01').eq(3).removeClass('active')};$scope.GetSX=function(){page=1;var areaid=$('#area_id').val();var distanceRecent=$('#distanceRecent').val();var subjectId=$('#subjectId').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'subjectId':subjectId,'distanceRecent':distanceRecent,'order':order,'activity':activity,'teacherSex':teacherSex};$('#CSchools').empty();$('.njhBody01').eq(3).removeClass('active');getcramschoollist(dataArry)};page=1;var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle};getcramschoollist(dataArry);$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){$scope.selectClass=function($event,ProjectID){var pfpx=Number($($event.target).attr('data-pfpx'));if(ProjectTotal!=pfpx+1){if(2<=pfpx<ProjectTotal-2){$('.IntHeader').css('left','-'+(pfpx-1)*25+'vw')}else if(pfpx<2){$('.IntHeader').css('left',0+'vw')}}$('.IntHeader_list').removeClass('IntHeader_Active');$($event.target).addClass('IntHeader_Active');$("#subjectId").val($(".IntHeader_Active").attr('data-Project'));page=1;var areaid=$('#area_id').val();var subjectId=$(".IntHeader_Active").attr('data-Project');var distanceRecent=$('#distanceRecent').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'subjectId':subjectId,'areaId':areaid,'distanceRecent':distanceRecent,'order':order,'activity':activity,'teacherSex':teacherSex};$("#CSchools").empty();getcramschoollist(dataArry)}});$(window).bind("scroll",function(){if($(document).scrollTop()>=$('.hotGroom').height()+2.5*12){$('#IntTabs').addClass('IntSectionFixed')}else if($(document).scrollTop()<$('.hotGroom').height()+12.1*12){$('#IntTabs').removeClass('IntSectionFixed')}if($(document).scrollTop()+$(window).height()==$(document).height()+5){page+=1;if(page==2){$("#CSchools").empty()}var areaid=$('#area_id').val();var subjectId=$('#subjectId').val();var distanceRecent=$('#distanceRecent').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'subjectId':subjectId,'areaId':areaid,'distanceRecent':distanceRecent,'order':order,'activity':activity,'teacherSex':teacherSex};$.ajax({type:"post",url:"/cramSchool/getSchoolList",data:dataArry,datatype:"json",success:function(data){listsplits(data.object);$("#CSchools").show();if(data.object.length==0){$("#getmorefalse").fadeIn();setTimeout(function(){$("#getmorefalse").fadeOut()},650)}}})}});$scope.searchHistory='';$scope.SearchMask=function(){$.ajax({type:"post",url:"/cramSchool/getSchoolSearchHistory",data:{},datatype:"json",success:function(data){$scope.searchHistory=data.object;console.log($scope.searchHistory);$scope.$apply()}});$('#zone').fadeOut();$('#InterSearchMask').fadeIn()};$scope.gobackfalse=function(){$('#zone').fadeIn();$('#InterSearchMask').fadeOut();$('#IntS_in').val('')};$scope.goSearch=function(){var keyWord=$('#IntS_in').val();var areaid=$('#area_id').val();$("#CSchools").empty();page=1;var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'keyWord':keyWord,};$('#CSchools').empty();getcramschoollist(dataArry);$('#zone').fadeIn();$('#InterSearchMask').fadeOut();setTimeout(function(){$('#IntS_in').val('')},500)};$scope.DeleteSearch=function(){$.ajax({type:"post",url:"/cramSchool/deleteSchoolSearchHistory",data:{},datatype:"json",success:function(data){$scope.searchHistory=data.object;console.log($scope.searchHistory);$scope.$apply()}})};$scope.HistorySearch=function($event){var keyWord=$($event.target).html();var areaid=$('#area_id').val();$("#CSchools").empty();page=1;var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'keyWord':keyWord,};$('#CSchools').empty();getcramschoollist(dataArry);$('#zone').fadeIn();$('#InterSearchMask').fadeOut()};$scope.njhscreen=function($event,ctype,eclass){var changename=$($event.target).attr('data-name');var changeid=$($event.target).attr('data-cityid');$('.njhBodyname').eq(ctype).empty();$('.njhBodyname').eq(ctype).html(changename);$('.smjj-change').eq(ctype).val(changeid);page=1;var areaid=$('#area_id').val();var subjectId=$('#subjectId').val();var distanceRecent=$('#distanceRecent').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'subjectId':subjectId,'areaId':areaid,'distanceRecent':distanceRecent,'order':order,'activity':activity,'teacherSex':teacherSex};$("#CSchools").empty();getcramschoollist(dataArry);setTimeout(function(){$('.njhBody01').removeClass('active');$('.njhBody').eq(ctype).removeClass('CSSearchActive');$('.njhTabs').removeClass('njhTabsActive');$('.cstabimgb').eq(ctype).removeClass("cstabimgbActive")},600)};$scope.getHotGroom='';$.ajax({type:"post",url:"/cramCourse/getHotCourseList",data:{'schoolTypeId':$scope.CramStyle},datatype:"json",success:function(data){$scope.getHotGroom=data.object;$scope.$apply()}})}])})(angular);