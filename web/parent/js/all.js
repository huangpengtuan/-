(function(angular){'use strict';angular.module('Massess',['ngRoute']).config(['$routeProvider',function($routeProvider){$routeProvider .when('/assIni/:TID/:CID',{templateUrl:'assess/assIni.html',controller:'assIniCtl'}).when('/assShow/:TID/:CID',{templateUrl:'assess/assShow.html',controller:'assShowCtl'}).when('/assAgain/:TID/:CID',{templateUrl:'assess/assAgain.html',controller:'assAgainCtl'})}]).controller('assIniCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.currId=$routeParams.CID;$scope.teatherId=$routeParams.TID;var gradeT=document.getElementsByClassName("gradeT");$scope.starD=0;for(var i=0;i<gradeT.length;i+=1){gradeT[i].onclick=function(){var indexx=$(".gradeT").index($(this));for(var i=0;i<gradeT.length;i+=1){$(".gradeT").removeClass("activeG");$(".gradeImg").attr('src',"img/icon_score_empty.png")}$(this).addClass("activeG").animate({width:'4rem'},"slow");$(".gradeImg").eq(indexx).attr('src',"img/icon_score.png").animate({width:'3rem'},"slow").animate({width:'2rem'},"slow");$scope.starD=$(".activeG").attr('data-grade');$scope.$apply()}}$scope.assSubmit=function(){var content=$(".assCText").val();var Score=$(".activeG").attr('data-grade');$.ajax({type:"post",url:"/comment/addCommentByCurriculum",data:{"currId":$scope.currId,"content":content,"parentScore":Score,},datatype:"json",success:function(data){if(!data.isSuccess){alert(data.msg)}else if(data.isSuccess){alert("您的评价已成功提交");$location.path('/assShow/'+$scope.teatherId+'/'+$scope.currId)}$scope.$apply()}})}}]).controller('assShowCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.currId=$routeParams.CID;$scope.teatherId=$routeParams.TID;$scope.comments='';$.ajax({type:"post",url:"/comment/getCommentByParent",data:{"teacherId":$scope.teatherId,},datatype:"json",success:function(data){$scope.comments=data.object;$scope.$apply()}})}]).controller('assAgainCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.currId=$routeParams.CID;$scope.teatherId=$routeParams.TID;$scope.comments='';$.ajax({type:"post",url:"/comment/getCommentByParent",data:{"teacherId":$scope.teatherId,},datatype:"json",success:function(data){$scope.comments=data.object;$scope.$apply()}});$scope.assSubmit=function(){var content=$(".assCText").val();$.ajax({type:"post",url:"/comment/addContentByCurriculum",data:{"currId":$scope.currId,"addContent":content,},datatype:"json",success:function(data){if(!data.isSuccess){alert(data.msg)}else if(data.isSuccess){alert("您的评价已成功提交");$location.path('/assShow/'+$scope.teatherId+'/'+$scope.currId)}$scope.$apply()}})}}])})(angular);
(function(angular){'use strict';angular.module('MCSchool',['ngRoute']).directive('onFinishRender',function($timeout){return{restrict:'A',link:function(scope,element,attr){if(scope.$last===true){$timeout(function(){scope.$emit('ngRepeatFinished')})}}}}).config(['$routeProvider',function($routeProvider){$routeProvider .when('/CSchool/',{templateUrl:'CramSchool/CramSchool.html',controller:'CSchoolCtl'}).when('/Cdetails/:ID',{templateUrl:'CramSchool/Cramdetails.html',controller:'CdetailsCtl'}).when('/curriculum/:ID',{templateUrl:'CramSchool/curriculum.html',controller:'curriculumCtl'}).when('/Reports/:ID',{templateUrl:'CramSchool/Report.html',controller:'ReportCtl'}).when('/ACinsure/',{templateUrl:'CramSchool/ACinsure.html',controller:'ACinsureCtl'}).when('/SCart/',{templateUrl:'CramSchool/ShoppingCart.html',controller:'SCartCtl'}).when('/Order/',{templateUrl:'CramSchool/Order.html',controller:'OrderCtl'}).when('/paySuccess/:ID',{templateUrl:'CramSchool/paySuccess.html',controller:'paySuccessCtl'}).when('/payFail/',{templateUrl:'CramSchool/payFail.html',controller:'payFailCtl'}).when('/SAS/:ID',{templateUrl:'CramSchool/SubjectAndStudy.html',controller:'SubjectAndStudyCtl'}).when('/InterestCram/:ID',{templateUrl:'CramSchool/InterestCram.html',controller:'InterestCramCtl'})}]).controller('CSchoolCtl',['$scope',function($scope){tabsfn('zoneBody','.zoneBody','.zoneBody01','tabItemactive');tabsfn('regionBody','.regionBody','.regionBody01','tabItemactive');$scope.ifAreas='';$scope.ifAreasname='';$.post("/p/getParentHome",{},function(data){$scope.ifAreas=data.content.parent_follow_area;if($scope.ifAreas){$scope.ifAreasname=data.content.parent_follow_area_name}else{$scope.ifAreasname='深圳市';$scope.ifAreas=440300}var page=1;var keyWord=$('#keyWords').val();var dataArry={'pageIndex':page,'pageSize':count,'areaId':$scope.ifAreas,'keyWord':keyWord};$('#CSchools').empty();getcramschoollist(dataArry);$scope.$apply()});$scope.search=function(){var keyWord=$('#keyWords').val();var areaid=$('#area_id').val();$("#CSchools").empty();page=1;var dataArry={'pageIndex':page,'pageSize':count,'areaId':areaid,'keyWord':keyWord,};$('#CSchools').empty();getcramschoollist(dataArry)};$scope.inderBanner='';$.ajax({type:"post",url:"/cramSchool/getSchoolBannerByCategoryType",data:{'categoryType':'补习班列表'},datatype:"json",success:function(data){$scope.inderBanner=data.object;console.log(data);$scope.$apply()}});$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){var swiper01=new Swiper('.swiper-container',{pagination:'.swiper-pagination',paginationClickable:true,grabCursor:true,touchRatio:0.5,autoplay:3000,loop:true})});$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()==$(document).height()+5){page+=1;if(page==2){$("#CSchools").empty()}var areaid=$('#area_id').val();var keyWord=$('#keyWords').val();var dataArry={'pageIndex':page,'pageSize':count,'areaId':areaid,'keyWord':keyWord,};$.ajax({type:"post",url:"/cramSchool/getSchoolList",data:dataArry,datatype:"json",success:function(data){listsplits(data.object);$("#CSchools").show();if(data.object.length==0){$("#getmorefalse").fadeIn();setTimeout(function(){$("#getmorefalse").fadeOut()},650)}}})}})}]).controller('CdetailsCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.cramSchoolId=$routeParams.ID;tabsfn('CDtabs','.CDtabs','.CDtabs1','CDactive');tabsfn('tabBody','.tabBody','.tabBody01','cramdetailactive');$scope.stars='';$scope.groups1='';$scope.groupcurri='';$scope.starslistA=[];var starsI='';$scope.quality_score='';$scope.quality_score01='';$scope.service_score='';$scope.service_score01='';$.ajax({type:"post",url:"/cramSchool/getCramSchoolById",data:{'schoolId':$scope.cramSchoolId},datatype:"json",success:function(data){$scope.starslistA=[];console.log(data.object);$scope.CramData=data.object;$scope.groups1=data.object.groups[0];$scope.groups1.id=data.object.groups[0].id;if($scope.CramData.eva_star*10%10<=2&&$scope.CramData.eva_star*10%10!=0){$scope.stars='img/start2.png'}else if($scope.CramData.eva_star*10%10<=5&&$scope.CramData.eva_star*10%10!=0){$scope.stars='img/start5.png'}else if($scope.CramData.eva_star*10%10<=9&&$scope.CramData.eva_star*10%10!=0){$scope.stars='img/start8.png'}else if($scope.CramData.eva_star==5){$scope.stars='img/start10.png'}else{$scope.stars='img/start0.png'}$scope.quality_score=data.object.quality_score;if($scope.quality_score*10%10<=2&&$scope.quality_score*10%10!=0){$scope.quality_score01='img/start2.png'}else if($scope.quality_score*10%10<=5&&$scope.quality_score*10%10!=0){$scope.quality_score01='img/start5.png'}else if($scope.quality_score*10%10<=9&&$scope.quality_score*10%10!=0){$scope.quality_score01='img/start8.png'}else if($scope.quality_score==5){$scope.quality_score01='img/start10.png'}else{$scope.quality_score01='img/start0.png'}$scope.service_score=data.object.service_score;if($scope.service_score*10%10<=2&&$scope.service_score*10%10!=0){$scope.service_score01='img/start2.png'}else if($scope.service_score*10%10<=5&&$scope.service_score*10%10!=0){$scope.service_score01='img/start5.png'}else if($scope.service_score*10%10<=9&&$scope.service_score*10%10!=0){$scope.service_score01='img/start8.png'}else if($scope.service_score==5){$scope.service_score01='img/start10.png'}else{$scope.service_score01='img/start0.png'}$.ajax({type:"post",url:"/cramCourse/getCramCourse",data:{"schoolId":$scope.cramSchoolId,"groupId":$scope.groups1.id,},datatype:"json",success:function(data){$scope.groupcurri=data.object.list;for(var i=0;i<$scope.groupcurri.length;i+=1){if($scope.groupcurri[i].composite_score*10%10<=2&&$scope.groupcurri[i].composite_score*10%10!=0){starsI='img/start2.png'}else if($scope.groupcurri[i].composite_score*10%10<=5&&$scope.groupcurri[i].composite_score*10%10!=0){starsI='img/start5.png'}else if($scope.groupcurri[i].composite_score*10%10<=9&&$scope.groupcurri[i].composite_score*10%10!=0){starsI='img/start8.png'}else if($scope.groupcurri[0].composite_score==5){starsI='img/start10.png'}else{starsI='img/start0.png'}$scope.starslistA.push(starsI);$scope.$apply()}}});$scope.$apply()}});$scope.fgcurri=function(schoolId,groupID,$event){var groupID=groupID;var schoolId=schoolId;$scope.starslistA=[];$.ajax({type:"post",url:"/cramCourse/getCramCourse",data:{"schoolId":schoolId,"groupId":groupID,},datatype:"json",success:function(data){$scope.groupcurri=data.object.list;for(var i=0;i<$scope.groupcurri.length;i+=1){if($scope.groupcurri[i].composite_score*10%10<=2&&$scope.groupcurri[i].composite_score*10%10!=0){starsI='img/start2.png'}else if($scope.groupcurri[i].composite_score*10%10<=5&&$scope.groupcurri[i].composite_score*10%10!=0){starsI='img/start5.png'}else if($scope.groupcurri[i].composite_score*10%10<=9&&$scope.groupcurri[i].composite_score*10%10!=0){starsI='img/start8.png'}else if($scope.groupcurri[i].composite_score==5){starsI='img/start10.png'}else{starsI='img/start0.png'}$scope.starslistA.push(starsI)}$scope.$apply()}});$('.tabBody').removeClass('cramdetailactive');$($event.target).addClass("cramdetailactive")};$scope.gocurriculum=function(curriID){$location.path('/curriculum/'+curriID)};$scope.count=0;$scope.totalPrice=0;$.ajax({type:"post",url:"/shoppingCart/getCarData",data:{'productType':1,},datatype:"json",success:function(data){$scope.count=data.object.count;$scope.totalPrice=data.object.totalPrice;$scope.$apply()}});$scope.joinshoppingcart=function(goodstype,goodsID){$('#BottomCart').fadeIn();$.ajax({type:"post",url:"/shoppingCart/addCart",data:{'c.product_type':goodstype,'c.product_id':goodsID,'c.count':1,},datatype:"json",success:function(data){$scope.count=data.object.count;$scope.totalPrice=data.object.totalPrice;$scope.$apply()}})};var EvpageSize=20;var EvpageIndex=1;$scope.EvaluateList='';$scope.totalRow='';$.ajax({type:"post",url:"/courseEvaluate/getEvaluateList",data:{'schoolId':$scope.cramSchoolId,'pageIndex':1,'pageSize':20},datatype:"json",success:function(data){$scope.totalRow=data.object.totalRow;$scope.EvaluateList=data.object.list;$scope.$apply()}});$scope.CCDfilmFadeIn=function(){$('.cramClassfilm').fadeIn()};$scope.CCDfilmFadeOut=function(){$('.cramClassfilm').fadeOut()};$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()==$(document).height()){EvpageSize+=20;$.ajax({type:"post",url:"/courseEvaluate/getEvaluateList",data:{'schoolId':$scope.cramSchoolId,'pageIndex':EvpageIndex,'pageSize':EvpageSize},datatype:"json",success:function(data){$scope.EvaluateList=data.object.list;$scope.$apply()}})}})}]).controller('curriculumCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.curriId=$routeParams.ID;$scope.stars='';$scope.curriobject='';$.ajax({type:"post",url:"/cramCourse/getCourse",data:{'courseId':$scope.curriId,},datatype:"json",success:function(data){$scope.curriobject=data.object;if(data.object.composite_score*10%10<=2&&data.object.composite_score*10%10!=0){$scope.stars='img/start2.png'}else if(data.object.composite_score*10%10<=5&&data.object.composite_score*10%10!=0){$scope.stars='img/start5.png'}else if(data.object.composite_score*10%10<=9&&data.object.composite_score*10%10!=0){$scope.stars='img/start8.png'}else if(data.object.composite_score==5){$scope.stars='img/start10.png'}else{$scope.stars='img/start0.png'}if(data.object.isFavorite){$('.Collect').attr({class:"icon-Collect Collect"})}else if(!data.object.isFavorite){$('.Collect').attr({class:"icon-cramDe-c Collect"})}$scope.$apply();wxShareCurrentPage($scope.curriobject.course_name,$scope.curriobject.introduction)}});$scope.paycurri=function(){localStorage.setItem("courseIdsArry",$scope.curriId);$location.path('/Order/')};$scope.Collect=function(){if($('.Collect').hasClass("icon-cramDe-c")){$('.Collect').attr({class:"icon-Collect CollectCheck Collect"});$.ajax({type:"post",url:"/favorite/addFavorite",data:{'goalId':$scope.curriId,'type':1,'url':window.location.href},datatype:"json",success:function(data){}})}else if($('.Collect').hasClass("icon-Collect")){$('.Collect').attr({class:"icon-cramDe-c Collect"});$.ajax({type:"post",url:"/favorite/cancelFavorite",data:{'goalId':$scope.curriId,'type':1,},datatype:"json",success:function(data){}})}};var EvpageSize=20;var EvpageIndex=1;$scope.EvaluateList='';$scope.totalRow='';$.ajax({type:"post",url:"/courseEvaluate/getEvaluateList",data:{'cramCourseId':$scope.curriId,'pageIndex':1,'pageSize':20},datatype:"json",success:function(data){$scope.totalRow=data.object.totalRow;$scope.EvaluateList=data.object.list;$scope.$apply()}});$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()==$(document).height()){EvpageSize+=20;$.ajax({type:"post",url:"/courseEvaluate/getEvaluateList",data:{'cramCourseId':$scope.curriId,'pageIndex':EvpageIndex,'pageSize':EvpageSize},datatype:"json",success:function(data){$scope.EvaluateList=data.object.list;$scope.$apply()}})}})}]).controller('ReportCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.cramSchoolId=$routeParams.ID;$('.reports-Li').click(function(){$(this).toggleClass('tabItemactive')})}]).controller('ACinsureCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var orderIdsArry=localStorage.getItem("orderIds");var applystates=document.getElementsByClassName("AC-Text02");for(var i=0;i<applystates.length;i+=1){applystates[i].onclick=function(){var indexx=$(".AC-Text02").index($(this));for(var i=0;i<applystates.length;i+=1){$(".AC-Text02").removeClass("AC-active");$(".icon-Uncheck").removeClass("AC-check")}$(this).addClass("AC-active");$(".icon-Uncheck").eq(indexx).addClass("AC-check")}}$scope.teacher_phone='';$scope.balance='';$scope.margin='';$.ajax({type:"post",url:"/order/getOrderAmount",data:{'orderIds':orderIdsArry},datatype:"json",success:function(data){$scope.margin=data.object.amount;$scope.balance=data.object.balance;$scope.$apply()}});$scope.applyStyle=1;$scope.applystateWaY=function(e){$scope.applyStyle=e};$scope.submitCrams=function(){if($scope.applyStyle==1){window.location.href="/c/pay/payForOrder?orderIds="+orderIdsArry}else if($scope.applyStyle==2){$.ajax({type:"post",url:"/order/balancePayOrder",data:{"orderIds":orderIdsArry,},datatype:"json",success:function(data){if(data.isSuccess){$location.path('/paySuccess/'+orderIdsArry)}else if(!data.isSuccess){$location.path('/payFail/')}$scope.$apply()}})}}}]).controller('SCartCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){tabsfn('SCart-tabs','.SCart-tabs','.SCart-tabs01','SCactive');$scope.CartLists='';$.ajax({type:"post",url:"/shoppingCart/getCartList",data:{'type':1},datatype:"json",success:function(data){$scope.CartLists=data.object;$scope.$apply()}});$scope.deleteFN=function(currid){$.ajax({type:"post",url:"/shoppingCart/deleteProductByCart",data:{'productType':1,'productId':currid},datatype:"json",success:function(data){$scope.CartLists=data.object;sumamount();$scope.$apply();jiajian();scartdelete('.SC-container');checkFN()}})};$scope.totalPrice=0;$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){scartdelete('.SC-container');jiajian();checkFN();listArry=[];sumamount()})}]).controller('OrderCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var courseIdsArry=localStorage.getItem("courseIdsArry");$scope.orderlist='';$scope.discountTotal='';$scope.originalTotal='';$scope.paymentAmount='';$.ajax({type:"post",url:"/cramCourse/buyCourse",data:{'courseIds':courseIdsArry},datatype:"json",success:function(data){$scope.orderlist=data.object.courses_list;$scope.discountTotal=data.object.discountTotal;$scope.originalTotal=data.object.originalTotal;$scope.paymentAmount=data.object.paymentAmount;$scope.$apply()}});$scope.submitOrders=function(){$.ajax({type:"post",url:"/order/submitOrderForCourse",data:{'courseIds':courseIdsArry},datatype:"json",success:function(data){if(data.isSuccess){localStorage.setItem("orderIds",data.object);$location.path('/ACinsure/')}else{alert(data.msg)}$scope.$apply()}})}}]).controller('paySuccessCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var Oid=$routeParams.ID;$scope.amount='';$scope.in_time='';$scope.pay_time='';$.ajax({type:"post",url:"/order/getOrderPaySuccessInfo",data:{'orderIds':Oid,},datatype:"json",success:function(data){$scope.amount=data.object.amount;$scope.in_time=data.object.in_time;$scope.pay_time=data.object.pay_time;$scope.$apply()}});$scope.gohomes=function(){$location.path('/home/')};$scope.goMyOrders=function(){$location.path('/MyOrders/')}}]).controller('payFailCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.gohomes=function(){$location.path('/home/')};$scope.goback=function(){window.history.back()}}]).controller('SubjectAndStudyCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.CramStyle=$routeParams.ID;$scope.goback=function(){window.history.back()};var CDtabs=document.getElementsByClassName('njhBody');for(var i=0;i<CDtabs.length;i+=1){CDtabs[i].onclick=function(){var indexx=$('.njhBody').index($(this));for(var i=0;i<CDtabs.length;i+=1){$('.njhBody').removeClass('CSSearchActive');$('.njhBody01').removeClass("active");$('.cstabimgb').removeClass("cstabimgbActive")}$(this).addClass('CSSearchActive');$('.njhBody01').eq(indexx).addClass("active");$('.njhBody01').eq(0).removeClass("active");$('.cstabimgb').eq(indexx).addClass("cstabimgbActive");$('.njhTabs').addClass('njhTabsActive');$('#CSchools').hide()}}tabsfn('zoneBody','.zoneBody','.zoneBody01','tabItemactive');tabsfn('SubjectBody','.SubjectBody','.SubjectBody01','tabItemactive');$scope.freeAx=function($event){var activityID=$($event.target).attr('data-name');$('.screenList01').removeClass('shaixuanActive');$($event.target).addClass('shaixuanActive');$('#activity').val(activityID)};$scope.SexAx=function($event){var sexID=$($event.target).attr('data-name');$('.screenList02').removeClass('shaixuanActive');$($event.target).addClass('shaixuanActive');$('#teacherSex').val(sexID)};$scope.EmptySX=function(){$('.screenList01').removeClass('shaixuanActive');$('.screenList02').removeClass('shaixuanActive');$('#activity').val('');$('#teacherSex').val('')};$scope.GetSX=function(){page=1;var areaid=$('#area_id').val();var subjectId=$('#subjectId').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'subjectId':subjectId,'order':order,'activity':activity,'teacherSex':teacherSex};$('#CSchools').empty();$('.njhBody01').eq(3).removeClass('active');getcramschoollist(dataArry)};page=1;var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle};getcramschoollist(dataArry);$scope.allsubject=function($event,ctype,eclass){var changename=$($event.target).attr('data-name');var changeid=$($event.target).attr('data-cityid');$('.njhBodyname').eq(ctype).html(changename);$('.smjj-change').eq(ctype).val(changeid);page=1;var areaid=$('#area_id').val();var subjectId=$('#subjectId').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'subjectId':subjectId,'order':order,'activity':activity,'teacherSex':teacherSex};$("#CSchools").empty();getcramschoollist(dataArry);setTimeout(function(){$('.njhBody01').removeClass('active');$('.njhBody').eq(ctype).removeClass('CSSearchActive');$('.njhTabs').removeClass('njhTabsActive');$('.cstabimgb').eq(ctype).removeClass("cstabimgbActive")},600)};$scope.njhscreen=function($event,ctype,eclass){var changeID=$($event.target).attr('data-cityid');if(eclass){$(eclass).removeClass('tabItemactive');$($event.target).toggleClass('tabItemactive')}var changename=$($event.target).attr('data-name');var changeid=$($event.target).attr('data-cityid');$('.njhBodyname').eq(ctype).empty();$('.njhBodyname').eq(ctype).html(changename);$('.smjj-change').eq(ctype).val(changeid);page=1;var areaid=$('#area_id').val();var subjectId=$('#subjectId').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'subjectId':subjectId,'order':order,'activity':activity,'teacherSex':teacherSex};$("#CSchools").empty();getcramschoollist(dataArry);setTimeout(function(){$('.njhBody01').removeClass('active');$('.njhBody').eq(ctype).removeClass('CSSearchActive');$('.njhTabs').removeClass('njhTabsActive');$('.cstabimgb').eq(ctype).removeClass("cstabimgbActive")},600)};$scope.searchHistory='';$scope.SearchMask=function(){$.ajax({type:"post",url:"/cramSchool/getSchoolSearchHistory",data:{},datatype:"json",success:function(data){$scope.searchHistory=data.object;console.log($scope.searchHistory);$scope.$apply()}});$('#zone').fadeOut();$('#InterSearchMask').fadeIn()};$scope.gobackfalse=function(){$('#zone').fadeIn();$('#InterSearchMask').fadeOut();$('#IntS_in').val('')};$scope.goSearch=function(){var keyWord=$('#IntS_in').val();var areaid=$('#area_id').val();$("#CSchools").empty();page=1;var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'keyWord':keyWord,};$('#CSchools').empty();getcramschoollist(dataArry);$('#zone').fadeIn();$('#InterSearchMask').fadeOut();setTimeout(function(){$('#IntS_in').val('')},500)};$scope.HistorySearch=function($event){var keyWord=$($event.target).html();var areaid=$('#area_id').val();$("#CSchools").empty();page=1;var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'keyWord':keyWord,};$('#CSchools').empty();getcramschoollist(dataArry);$('#zone').fadeIn();$('#InterSearchMask').fadeOut()};$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()==$(document).height()+5){page+=1;if(page==2){$("#CSchools").empty()}var areaid=$('#area_id').val();var subjectId=$('#subjectId').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':1,'areaId':areaid,'subjectId':subjectId,'order':order,'activity':activity,'teacherSex':teacherSex};$.ajax({type:"post",url:"/cramSchool/getSchoolList",data:dataArry,datatype:"json",success:function(data){listsplits(data.object);$("#CSchools").show();if(data.object.length==0){$("#getmorefalse").fadeIn();setTimeout(function(){$("#getmorefalse").fadeOut()},650)}}})}})}]).controller('InterestCramCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.CramStyle=$routeParams.ID;$scope.CramProject='';var ProjectTotal='';$.ajax({type:"post",url:"/subject/getSubjectListByType",data:{'schoolTypeId':$scope.CramStyle},datatype:"json",success:function(data){$scope.CramProject=data.object;ProjectTotal=data.object.length;$scope.$apply()}});$scope.goback=function(){window.history.back()};var CDtabs=document.getElementsByClassName('njhBody');for(var i=0;i<CDtabs.length;i+=1){CDtabs[i].onclick=function(){var indexx=$('.njhBody').index($(this));for(var i=0;i<CDtabs.length;i+=1){$('.njhBody').removeClass('InterActive');$('.njhBody01').removeClass("active");$('.cstabimgb').removeClass("cstabimgbActive")}$(this).addClass('InterActive');if(indexx==1){$('.njhBody01').eq(1).removeClass("active");$('.njhBody01').eq(1).val('1');page=1;var areaid=$('#area_id').val();var subjectId=$('#subjectId').val();var distanceRecent=$('#distanceRecent').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'subjectId':subjectId,'distanceRecent':1,'order':order,'activity':activity,'teacherSex':teacherSex};$('#CSchools').empty();$('.njhBody01').eq(3).removeClass('active');getcramschoollist(dataArry)}else{$('.njhBody01').eq(indexx).addClass("active")}$('.njhBody01').eq(0).removeClass("active");$('.cstabimgb').eq(indexx).addClass("cstabimgbActive");$('#CSchools').hide()}}tabsfn('zoneBody','.zoneBody','.zoneBody01','tabItemactive');$scope.freeAx=function($event){var activityID=$($event.target).attr('data-name');$('.screenList01').removeClass('shaixuanActive');$($event.target).addClass('shaixuanActive');$('#activity').val(activityID)};$scope.SexAx=function($event){var sexID=$($event.target).attr('data-name');$('.screenList02').removeClass('shaixuanActive');$($event.target).addClass('shaixuanActive');$('#teacherSex').val(sexID)};$scope.EmptySX=function(){$('.screenList01').removeClass('shaixuanActive');$('.screenList02').removeClass('shaixuanActive');$('#activity').val('');$('#teacherSex').val('');$('.njhBody01').eq(3).removeClass('active')};$scope.GetSX=function(){page=1;var areaid=$('#area_id').val();var distanceRecent=$('#distanceRecent').val();var subjectId=$('#subjectId').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'subjectId':subjectId,'distanceRecent':distanceRecent,'order':order,'activity':activity,'teacherSex':teacherSex};$('#CSchools').empty();$('.njhBody01').eq(3).removeClass('active');getcramschoollist(dataArry)};page=1;var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle};getcramschoollist(dataArry);$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){$scope.selectClass=function($event,ProjectID){var pfpx=Number($($event.target).attr('data-pfpx'));if(ProjectTotal!=pfpx+1){if(2<=pfpx<ProjectTotal-2){$('.IntHeader').css('left','-'+(pfpx-1)*25+'vw')}else if(pfpx<2){$('.IntHeader').css('left',0+'vw')}}$('.IntHeader_list').removeClass('IntHeader_Active');$($event.target).addClass('IntHeader_Active');$("#subjectId").val($(".IntHeader_Active").attr('data-Project'));page=1;var areaid=$('#area_id').val();var subjectId=$(".IntHeader_Active").attr('data-Project');var distanceRecent=$('#distanceRecent').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'subjectId':subjectId,'areaId':areaid,'distanceRecent':distanceRecent,'order':order,'activity':activity,'teacherSex':teacherSex};$("#CSchools").empty();getcramschoollist(dataArry)}});$(window).bind("scroll",function(){if($(document).scrollTop()>=$('.hotGroom').height()+2.5*12){$('#IntTabs').addClass('IntSectionFixed')}else if($(document).scrollTop()<$('.hotGroom').height()+12.1*12){$('#IntTabs').removeClass('IntSectionFixed')}if($(document).scrollTop()+$(window).height()==$(document).height()+5){page+=1;if(page==2){$("#CSchools").empty()}var areaid=$('#area_id').val();var subjectId=$('#subjectId').val();var distanceRecent=$('#distanceRecent').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'subjectId':subjectId,'areaId':areaid,'distanceRecent':distanceRecent,'order':order,'activity':activity,'teacherSex':teacherSex};$.ajax({type:"post",url:"/cramSchool/getSchoolList",data:dataArry,datatype:"json",success:function(data){listsplits(data.object);$("#CSchools").show();if(data.object.length==0){$("#getmorefalse").fadeIn();setTimeout(function(){$("#getmorefalse").fadeOut()},650)}}})}});$scope.searchHistory='';$scope.SearchMask=function(){$.ajax({type:"post",url:"/cramSchool/getSchoolSearchHistory",data:{},datatype:"json",success:function(data){$scope.searchHistory=data.object;console.log($scope.searchHistory);$scope.$apply()}});$('#zone').fadeOut();$('#InterSearchMask').fadeIn()};$scope.gobackfalse=function(){$('#zone').fadeIn();$('#InterSearchMask').fadeOut();$('#IntS_in').val('')};$scope.goSearch=function(){var keyWord=$('#IntS_in').val();var areaid=$('#area_id').val();$("#CSchools").empty();page=1;var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'keyWord':keyWord,};$('#CSchools').empty();getcramschoollist(dataArry);$('#zone').fadeIn();$('#InterSearchMask').fadeOut();setTimeout(function(){$('#IntS_in').val('')},500)};$scope.DeleteSearch=function(){$.ajax({type:"post",url:"/cramSchool/deleteSchoolSearchHistory",data:{},datatype:"json",success:function(data){$scope.searchHistory=data.object;console.log($scope.searchHistory);$scope.$apply()}})};$scope.HistorySearch=function($event){var keyWord=$($event.target).html();var areaid=$('#area_id').val();$("#CSchools").empty();page=1;var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'areaId':areaid,'keyWord':keyWord,};$('#CSchools').empty();getcramschoollist(dataArry);$('#zone').fadeIn();$('#InterSearchMask').fadeOut()};$scope.njhscreen=function($event,ctype,eclass){var changename=$($event.target).attr('data-name');var changeid=$($event.target).attr('data-cityid');$('.njhBodyname').eq(ctype).empty();$('.njhBodyname').eq(ctype).html(changename);$('.smjj-change').eq(ctype).val(changeid);page=1;var areaid=$('#area_id').val();var subjectId=$('#subjectId').val();var distanceRecent=$('#distanceRecent').val();var order=$('#order').val();var teacherSex=$('#teacherSex').val();var activity=$('#activity').val();var dataArry={'pageIndex':page,'pageSize':count,'schoolTypeId':$scope.CramStyle,'subjectId':subjectId,'areaId':areaid,'distanceRecent':distanceRecent,'order':order,'activity':activity,'teacherSex':teacherSex};$("#CSchools").empty();getcramschoollist(dataArry);setTimeout(function(){$('.njhBody01').removeClass('active');$('.njhBody').eq(ctype).removeClass('CSSearchActive');$('.njhTabs').removeClass('njhTabsActive');$('.cstabimgb').eq(ctype).removeClass("cstabimgbActive")},600)};$scope.getHotGroom='';$.ajax({type:"post",url:"/cramCourse/getHotCourseList",data:{'schoolTypeId':$scope.CramStyle},datatype:"json",success:function(data){$scope.getHotGroom=data.object;$scope.$apply()}})}])})(angular);
(function(angular){'use strict';angular.module('MFind',['ngRoute']).directive('onFinishRender',function($timeout){return{restrict:'A',link:function(scope,element,attr){if(scope.$last===true){$timeout(function(){scope.$emit('ngRepeatFinished')})}}}}).config(['$routeProvider',function($routeProvider){$routeProvider.when('/find/',{templateUrl:'find/find.html',controller:'findCtl'})}]).controller('findCtl',['$scope','$route','$routeParams','$location',function($scope,$location,$routeParams,$route){var findtabs=document.getElementsByClassName("findtabs");for(var i=0;i<findtabs.length;i+=1){findtabs[i].onclick=function(){var indexx=$(".findtabs").index($(this));for(var i=0;i<findtabs.length;i+=1){$(".findtabs").removeClass("activeFind");$(".findtabs1").removeClass("active")}$(this).addClass("activeFind");$(".findtabs1").eq(indexx).addClass("active")}}$scope.newslist='';$scope.inderBanner='';$.ajax({type:"post",url:"/api/mall/index?banner_category_id=1&toutiao_category_id=1",data:{},datatype:"json",success:function(data){$scope.newslist=data.object;$scope.inderBanner=data.object.inderBanner;$scope.$apply()}});$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){var swiper01=new Swiper('.swiper-container',{pagination:'.swiper-pagination',paginationClickable:true,grabCursor:true,touchRatio:0.5,autoplay:3000,loop:true})})}])})(angular);
(function(angular){'use strict';angular.module('Mpartner',['ngRoute']).config(['$routeProvider',function($routeProvider){$routeProvider .when('/partner/',{templateUrl:'hehuoren/hehuoren.html',controller:'partnerCtl'}).when('/guizemingxi/',{templateUrl:'hehuoren/guizemingxi.html',controller:'guizemingxiCtl'}).when('/wagesExchange/',{templateUrl:'hehuoren/wagesExchange.html',controller:'wagesExchangeCtl'}).when('/ApplyPartner/',{templateUrl:'hehuoren/ApplyPartner.html',controller:'ApplyPartnerCtl'}).when('/PartnerPay/',{templateUrl:'hehuoren/PartnerPay.html',controller:'PartnerPayCtl'})}]).controller('partnerCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){tabsfn('DirIntro-tabs','.DirIntro-tabs','.DirIntro-tabs01','DirIntroactive');$scope.FlowRecordList01='';$scope.totalRow01='';$scope.showListFn01=function(){$.ajax({type:"post",url:"/partnerFlowRecord/getFlowRecordList",data:{"pageIndex":1,"pageSize":10000,"type":5},datatype:"json",success:function(data){console.log(data);$scope.FlowRecordList01=data.object.list;$scope.totalRow01=data.object.totalRow;$scope.$apply()}});$('.Partner').fadeOut();$('.AmountOfIncome').fadeIn()};$scope.FlowRecordList02='';$scope.totalRow02='';$scope.showListFn02=function(){$.ajax({type:"post",url:"/partnerFlowRecord/getFlowRecordList",data:{"pageIndex":1,"pageSize":10000,"type":1},datatype:"json",success:function(data){$scope.FlowRecordList02=data.object.list;$scope.totalRow02=data.object.totalRow;$scope.$apply()}});$('.Partner').fadeOut();$('.ContributionValue').fadeIn()};$scope.FlowRecordList03='';$scope.totalRow03='';$scope.showListFn03=function(){$.ajax({type:"post",url:"/partnerFlowRecord/getFlowRecordList",data:{"pageIndex":1,"pageSize":10000,"type":0},datatype:"json",success:function(data){$scope.FlowRecordList03=data.object.list;$scope.totalRow03=data.object.totalRow;$scope.$apply()}});$('.Partner').fadeOut();$('.wages').fadeIn()};$scope.directIntrodu='';$scope.directTotal='';$scope.indirectIntrodu='';$scope.indirectTotal='';$scope.showListFn04=function(a){$.ajax({type:"post",url:"/partner/getDirectUserList",data:{"pageIndex":1,"pageSize":10000},datatype:"json",success:function(data){$scope.directIntrodu=data.object.list;$scope.directTotal=data.object.totalRow;$scope.$apply()}});$.ajax({type:"post",url:"/partner/getIndirectUserList",data:{"pageIndex":1,"pageSize":10000},datatype:"json",success:function(data){$scope.indirectIntrodu=data.object.list;$scope.indirectTotal=data.object.totalRow;$scope.$apply()}});var Dirtabs=$('.DirIntro-tabs');if(a==2){for(var i=0;i<Dirtabs.length;i+=1){$('.DirIntro-tabs').removeClass('DirIntroactive');$('.DirIntro-tabs01').removeClass('active')}$('.DirIntro-tabs').eq(1).addClass('DirIntroactive');$('.DirIntro-tabs01').eq(1).addClass('active')}else if(a==1){for(var i=0;i<Dirtabs.length;i+=1){$('.DirIntro-tabs').removeClass('DirIntroactive');$('.DirIntro-tabs01').removeClass('active')}$('.DirIntro-tabs').eq(0).addClass('DirIntroactive');$('.DirIntro-tabs01').eq(0).addClass('active')}$('.Partner').fadeOut();$('.DirectIntro').fadeIn()};$scope.FlowRecordList04='';$scope.totalRow04='';$scope.showListFn05=function(){$.ajax({type:"post",url:"/partnerFlowRecord/getFlowRecordList",data:{"pageIndex":1,"pageSize":10000,"type":2},datatype:"json",success:function(data){$scope.FlowRecordList04=data.object.list;$scope.totalRow04=data.object.totalRow;$scope.$apply()}});$('.Partner').fadeOut();$('.ContributionValue-HL').fadeIn()};$scope.goguize=function(){$location.path('/guizemingxi/')};$scope.membraneDisappear=function(){$('.AmountOfIncome').fadeOut();$('.ContributionValue').fadeOut();$('.wages').fadeOut();$('.DirectIntro').fadeOut();$('.ContributionValue-HL').fadeOut();$('.Partner').fadeIn()};$scope.goback=function(){window.history.back()};$scope.Pcontent="";$.ajax({type:"post",url:"/partner/getPartnerInfo",data:{},datatype:"json",success:function(data){$scope.Pcontent=data.object;$scope.$apply()}})}]).controller('guizemingxiCtl',['$scope','$location','$routeParams',function($scope,$location,$routeParams){}]).controller('wagesExchangeCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var WExchange=$('.WExchange_stateTOP');for(var i=0;i<WExchange.length;i+=1){WExchange[i].onclick=function(){var indexx=$('.WExchange_stateTOP').index($(this));for(var i=0;i<WExchange.length;i+=1){$('.WExchange_state').removeClass('PartnerActive');$('.icon-Uncheck').removeClass('AC-check');$('.WExchange_Data').slideUp()}$scope.Salarys=0;$scope.SalaryNumber=0;$scope.$apply();$('.WExchange_state').eq(indexx).addClass('PartnerActive');$('.icon-Uncheck').eq(indexx).addClass('AC-check');$('.WExchange_Data').eq(indexx).slideDown()}}$scope.SalaryNumber=0;$scope.Salarys=0;var SStates='';var SNumbers='';$scope.getSalary=function(SState,SNumber){SStates=SState;SNumbers=SNumber;$.ajax({type:"post",url:"/partner/getSalaryConversionResult",data:{"changeNumber":SNumber,"type":SState},datatype:"json",success:function(data){if(SNumber==0){$scope.Salarys==0}else if(SNumber>0){$scope.Salarys=data.object}$scope.$apply()}})};$scope.Pcontent="";$.ajax({type:"post",url:"/partner/getPartnerInfo",data:{},datatype:"json",success:function(data){$scope.Pcontent=data.object;$scope.$apply()}});$scope.submitExchange=function(){$.ajax({type:"post",url:"/partner/wageChange",data:{"changeNumber":SNumbers,"type":SStates},datatype:"json",success:function(data){alert(data.msg);if(data.isSuccess){$.ajax({type:"post",url:"/partner/getPartnerInfo",data:{},datatype:"json",success:function(data){$scope.Pcontent=data.object;$scope.$apply()}})}}})};$scope.goback=function(){window.history.back()}}]).controller('ApplyPartnerCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.goback=function(){window.history.back()};var applytabs=$('.applyPartnertabs');for(var i=0;i<applytabs.length;i+=1){applytabs[i].onclick=function(){$(this).addClass('activeFuck')}}var partnerCheck=$('.APData_check');for(var i=0;i<partnerCheck.length;i+=1){partnerCheck[i].onclick=function(){var indexx=$('.APData_check').index($(this));for(var i=0;i<partnerCheck.length;i+=1){$('.APData_check').removeClass('PartnerActive');$('.icon-Uncheck').removeClass('checksActive')}$(this).addClass('PartnerActive');$('.icon-Uncheck').eq(indexx).addClass('checksActive')}}$scope.submitpay=function(){localStorage.setItem('NeedMoney',$('.checksActive').attr('data-NeedMoney'));$.ajax({type:"post",url:"/openPartnerApply/saveOpenPartnerApply",data:{"verCode":$('#verCode').val(),"apply.name":$('#names').val(),"apply.mobile":$('#mobile').val(),"apply.partner_type":$('.checksActive').attr('data-partnerType'),},datatype:"json",success:function(data){console.log(data);if(!data.isSuccess){alert(data.msg)}else if(data.isSuccess||data.object==3){$location.path('/PartnerPay/')}$scope.$apply()}})};$scope.immediately=function(){$('.applyPartnertabs').removeClass('applyPartneractive');$('.applyPartnertabs1').removeClass('active');$('.applyPartnertabs').eq(0).addClass('applyPartneractive');$('.applyPartnertabs1').eq(0).addClass('active')};$scope.goguize=function(){$location.path('/guizemingxi/')};var daojishu=60;$scope.getYZM=function(){var mobiles=$('#mobile').val();$.ajax({type:"post",url:"/openPartnerApply/sendSmsByOpenPartner",data:{"mobile":mobiles,},datatype:"json",success:function(data){if(!data.isSuccess){alert(data.msg)}else if(data.isSuccess){var my_interval=setInterval(function(){if(daojishu>0){$('.getYZM').html(daojishu+"秒后可重新获取");daojishu-=1}else if(daojishu==0){clearInterval(my_interval);daojishu=60;$('.getYZM').html("重新获取验证码")}},1000)}$scope.$apply()}})};$scope.partnerCost='';$scope.superPartnerCost='';$.ajax({type:"post",url:"/openPartnerApply/getOpenNeedMoney",data:{},datatype:"json",success:function(data){$scope.partnerCost=data.object.partnerCost;$scope.superPartnerCost=data.object.superPartnerCost;$scope.$apply()}});$scope.ApplyPartnerDatas='';$scope.ApplyStateText='';$scope.ApplyStateText01='';$scope.isApplyState=false;$scope.ApplyPstatesImg='';$.ajax({type:"post",url:"/openPartnerApply/getPartnerApply",data:{},datatype:"json",success:function(data){if(data.object){$scope.ApplyPartnerDatas=data.object;if($scope.ApplyPartnerDatas.apply_state==2){$scope.ApplyStateText='审核不通过';$scope.ApplyStateText01='您的审核申请不通过，款项将于7个工作日内退还至您的账户余额';$scope.ApplyPstatesImg='icon-examine-not';$('.applyPartnertabs').removeClass('applyPartneractive');$('.applyPartnertabs1').removeClass('active');$('.applyPartnertabs').eq(1).addClass('applyPartneractive');$('.applyPartnertabs1').eq(1).addClass('active')}else if($scope.ApplyPartnerDatas.apply_state==4||$scope.ApplyPartnerDatas.apply_state==5){$scope.ApplyStateText='审核中';$scope.ApplyStateText01='工作人员将于3个工作日后通知审核结果，请您耐心等待审核结果。审核不通过款项将退还账户余额';$scope.ApplyPstatesImg='icon-examineing';$('.applyPartnertabs').removeClass('applyPartneractive');$('.applyPartnertabs1').removeClass('active');$('.applyPartnertabs').eq(1).addClass('applyPartneractive');$('.applyPartnertabs1').eq(1).addClass('active')}else if($scope.ApplyPartnerDatas.apply_state==3){$('.applyPartnertabs').removeClass('applyPartneractive');$('.applyPartnertabs1').removeClass('active');$('.applyPartnertabs').eq(0).addClass('applyPartneractive');$('.applyPartnertabs1').eq(0).addClass('active')}}else if(!data.object){$('.applyPartnertabs').removeClass('applyPartneractive');$('.applyPartnertabs1').removeClass('active');$('.applyPartnertabs').eq(0).addClass('applyPartneractive');$('.applyPartnertabs1').eq(0).addClass('active')}$scope.$apply()}})}]).controller('PartnerPayCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.goguize=function(){$location.path('/guizemingxi/')};var paystyle=1;var applystates=document.getElementsByClassName("AC-Text02");for(var i=0;i<applystates.length;i+=1){applystates[i].onclick=function(){var indexx=$(".AC-Text02").index($(this));for(var i=0;i<applystates.length;i+=1){$(".AC-Text02").removeClass("AC-active");$(".icon-Uncheck").removeClass("AC-check")}$(this).addClass("AC-active");$(".icon-Uncheck").eq(indexx).addClass("AC-check");paystyle=$(this).attr('data-paystyle')}}$scope.goback=function(){window.history.back()};$scope.BankpayfadeOut=function(){$.ajax({type:"post",url:"/openPartnerApply/confirmTransfer",data:{},datatype:"json",success:function(data){if(data.isSuccess){alert('我们将尽快核实您的转账信息，请耐心等待。');$location.path('/home/')}else{alert(data.msg)}$scope.$apply()}});$('.TransferAccounts').fadeOut()};$scope.submitPay=function(){if(paystyle==1){$('.TransferAccounts').fadeIn()}else if(paystyle==2){window.location.href="/c/pay/payForPartnerApply"}else if(paystyle==3){$.ajax({type:"post",url:"/openPartnerApply/balancePayApply",data:{},datatype:"json",success:function(data){alert(data.msg);if(data.isSuccess){$location.path('/home/')}$scope.$apply()}})}};$scope.needpaymoney=localStorage.getItem('NeedMoney')}])})(angular);
(function(angular){'use strict';angular.module('Mhome',['ngRoute']).config(['$routeProvider',function($routeProvider){$routeProvider.when('/home/',{templateUrl:'home/home.html',controller:'homeCtl'})}]).controller('homeCtl',['$scope','$location','$routeParams','$route',function($scope,$location,$routeParams,$route){tabsfn('zoneBody','.zoneBody','.zoneBody01','tabItemactive');$scope.ifAreas='';$scope.ifAreasname='';$scope.ParentHome={};$scope.tecacherCount='';$scope.unMessageCount='';$scope.parent_follow_area_pinyin='';$.post("/p/getParentHome",{},function(data){$scope.ParentHome=data;$scope.tecacherCount=data.content.tecacherCount;$scope.ifAreas=data.content.parent_follow_area;$scope.unMessageCount=data.content.unMessageCount;$scope.parent_follow_area_pinyin=data.content.parent_follow_area_pinyin;if($scope.ifAreas){$scope.ifAreasname=data.content.parent_follow_area_name}else if(!$scope.ifAreas){$scope.ifAreas='440300';$scope.ifAreasname='深圳'}$scope.$apply()});$scope.goPartner=function(isPartner){if(isPartner){$location.path('/partner/')}else if(!isPartner){$location.path('/ApplyPartner/')}};$scope.inderBanner='';$.ajax({type:"post",url:"/cramSchool/getSchoolBannerByCategoryType",data:{"categoryType":"家长首页"},datatype:"json",success:function(data){$scope.inderBanner=data.object;$scope.$apply()}});$('#head_b_input').focus(function(){$('#head_b_img').fadeOut()});$('#head_b_input').blur(function(){$('#head_b_img').fadeIn()});$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){var swiper01=new Swiper('.swiper-container',{pagination:'.swiper-pagination',paginationClickable:true,grabCursor:true,touchRatio:0.5,autoplay:3000,loop:true})})}])})(angular);
(function(angular){'use strict';angular.module('Mme',['ngRoute']).directive('onFinishRender',function($timeout){return{restrict:'A',link:function(scope,element,attr){if(scope.$last===true){$timeout(function(){scope.$emit('ngRepeatFinished')})}}}}).config(['$routeProvider',function($routeProvider){$routeProvider .when('/my/',{templateUrl:'me/me.html',controller:'meCtl'}).when('/phone/',{templateUrl:'me/telephone.html',controller:'phoneCtl'}).when('/authen/',{templateUrl:'me/authen.html',controller:'authenCtl'}).when('/editChilds/',{templateUrl:'me/editChilds.html',controller:'editChildsCtl'}).when('/mychild/:ID/:oldID',{templateUrl:'me/mychild.html',controller:'mychildCtl'}).when('/modifyChild/:ID',{templateUrl:'me/modifyChild.html',controller:'modifyChildsCtl'}).when('/MyOrders/',{templateUrl:'me/MyOrders.html',controller:'MyOrdersCtl'}).when('/OrderDetails/:ID',{templateUrl:'me/OrderDetails.html',controller:'OrderDetailsCtl'}).when('/refundApply/:ID',{templateUrl:'me/refundApply.html',controller:'refundApplyCtl'}).when('/RefundDetails/:ID',{templateUrl:'me/RefundDetails.html',controller:'RefundDetailsCtl'}).when('/Evaluate/:ID',{templateUrl:'me/Evaluate.html',controller:'EvaluateCtl'}).when('/MyCollect/',{templateUrl:'me/MyCollect.html',controller:'MyCollectCtl'})}]).controller('meCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.avatar='';$scope.name='';$scope.vip_type='';$scope.sex='';$scope.score='';$scope.balance='';$scope.mobile='';$scope.verify='';$.post("/p/getMyInfo",{},function(data){$scope.avatar=data.avatar;$scope.name=data.name;$scope.parentVip=data.parentVip;$scope.sex=data.sex;$scope.score=data.score;$scope.balance=data.balance;$scope.verify=data.is_id_card_verify;if(!data.mobile){$scope.mobile='绑定手机'}else if(data.mobile){$scope.mobile=data.mobile}$scope.$apply()});$scope.authens=function(veri){var verifys=veri;if(verifys==2){alert("您已经通过实名认证，无需再认证")}else{$location.path('/authen/')}}}]).controller('phoneCtl',['$scope',function($scope){$scope.statetext='';$scope.statetab='';$scope.telephone='';$.post("/p/getMyInfo",{},function(data){if(!data.mobile){$scope.statetext='未绑定';$scope.statetab='绑定手机';$scope.telephone='手机号码'}else if(data.mobile){$scope.statetext=data.mobile;;$scope.statetab='更换绑定手机';$scope.telephone='改绑手机号码'}$scope.$apply()});var countdown=60;var settime=function(obj){if(countdown==0){obj.attr('disabled',false);obj.val("获取验证码");countdown=60;return}else{obj.attr('disabled',true);obj.val("重新发送("+countdown+")");countdown-=1}setTimeout(function(){settime(obj)},1000)};var sendemail=function(){var obj=$("#btnsend");settime(obj)};$scope.sendSms=function(){var mobiles=$('.rCinputI').val();$.ajax({type:"post",url:"/c/sendSms",data:{"mobile":mobiles,},datatype:"json",success:function(data){sendemail()}})};$scope.bindmobile=function(){var mobiles=$('.rCinputI').val();var sendtext=$('.yanzhengma').val();$.ajax({type:"post",url:"/c/wdForPhone",data:{"mobile":mobiles,"mobileCode":sendtext,},datatype:"json",success:function(data){alert(data.msg);if(data.isSuccess){location.reload()}}})}}]).controller('authenCtl',['$scope',function($scope){$scope.submitAuthen=function(){var formData=new FormData($("#withdrawForm")[0]);$.ajax({type:"post",url:"/c/realNameAuthentication",data:formData,datatype:"json",async:false,cache:false,contentType:false,processData:false,success:function(data){alert(data.msg);location.reload()}})}}]).controller('editChildsCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.creatChilds=function(){var ChildsData=$('#CNdatas').serializeArray();$.ajax({type:"post",url:"/childrenInfo/createChildrenInfo",data:{"c.name":ChildsData[0].value,"c.age":ChildsData[1].value,"c.sex":ChildsData[2].value,"c.mobile":ChildsData[3].value,"c.explain":ChildsData[4].value,},datatype:"json",success:function(data){alert(data.msg);if(data.isSuccess){location.reload()}}})};$scope.goback=function(){window.history.back()}}]).controller('mychildCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.currisID=$routeParams.ID;$scope.oldID=$routeParams.oldID;$scope.Mychildlist='';$scope.ishavechild='';tabsfn('Admintabs','.Admintabs','.DY-tabs01','activeFind');if($scope.currisID==0){$.ajax({type:"post",url:"/childrenInfo/getChildrenList",data:{},datatype:"json",success:function(data){$scope.Mychildlist=data.object;if(data.object.length==0){$scope.ishavechild=true}else{$scope.ishavechild=false}$scope.$apply()}})}else if($scope.currisID>0){$.ajax({type:"post",url:"/childrenInfo/getChildrenListByCourse",data:{'courseId':$scope.currisID},datatype:"json",success:function(data){$scope.Mychildlist=data.object;console.log($scope.Mychildlist);if(data.object.length==0){$scope.ishavechild=true}else{$scope.ishavechild=false}$scope.$apply()}})}$scope.goEdit=function(){$location.path('/editChilds/')};$scope.goback=function(){window.history.back()};$scope.thisDefaults=function(defaultindex,childlistsid){var indexss=defaultindex;$.ajax({type:"post",url:"/childrenInfo/setDefaultInfo",data:{'childrenId':childlistsid},datatype:"json",success:function(data){$.ajax({type:"post",url:"/childrenInfo/getChildrenList",data:{},datatype:"json",success:function(data){$scope.Mychildlist=data.object;$scope.$apply()}});$('.icon-Uncheck').removeClass('default-Active');$('.icon-Uncheck').eq(indexss-1).addClass('default-Active')}})};$scope.deletechilds=function(childlistsid){$.ajax({type:"post",url:"/childrenInfo/deleteChildrenInfo",data:{'childrenId':childlistsid},datatype:"json",success:function(data){$.ajax({type:"post",url:"/childrenInfo/getChildrenList",data:{},datatype:"json",success:function(data){$scope.Mychildlist=data.object;$scope.$apply()}});scartdelete('.Mychilds-container')}})};$scope.ChoiceChilds=function(childlistsid){if($scope.oldID==0){$scope.oldID=null}$.ajax({type:"post",url:"/courseOrderChildren/addChildrenToCourse",data:{'childrenId':childlistsid,'courseId':$scope.currisID,'oldChildrenId':$scope.oldID},datatype:"json",success:function(data){window.history.back()}})};$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){scartdelete('.Mychilds-container')})}]).controller('modifyChildsCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.childsID=$routeParams.ID;$scope.childsData='';$.ajax({type:"post",url:"/childrenInfo/getChildrenById",data:{"childrenId":$scope.childsID,},datatype:"json",success:function(data){$scope.childsData=data.object;$scope.$apply()}});$scope.modifyChilds=function(){var ChildsData=$('#CNdatas').serializeArray();$.ajax({type:"post",url:"/childrenInfo/editChildrenInfo",data:{"c.id":$scope.childsID,"c.name":ChildsData[0].value,"c.age":ChildsData[1].value,"c.sex":ChildsData[2].value,"c.mobile":ChildsData[3].value,"c.explain":ChildsData[4].value,},datatype:"json",success:function(data){alert(data.msg);if(data.isSuccess){window.history.back()}}})};$scope.goback=function(){window.history.back()}}]).controller('MyOrdersCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){tabsfn('DY-tabs','.DY-tabs','.DY-tabs01','SCactive');var cancalReason=document.getElementsByClassName('cancalReason');for(var i=0;i<cancalReason.length;i+=1){cancalReason[i].onclick=function(){var indexx=$('.cancalReason').index($(this));for(var i=0;i<cancalReason.length;i+=1){$('.icon-Uncheck').removeClass('checksActive')}$('.icon-Uncheck').eq(indexx).addClass('checksActive')}}$scope.cancalReasonFadein=function(Oid){$('.cancalState').fadeIn();localStorage.setItem("DeleteOrderId",Oid)};$scope.cancalReasonFadeOut=function(){$('.cancalState').fadeOut()};$scope.goOrderDetails=function(OState,Oid){if(OState==0||OState==1||OState==2||OState==3||OState==4){$location.path('/OrderDetails/'+Oid)}else{$location.path('/RefundDetails/'+Oid)}};$scope.goEvaluate=function(Oid){$location.path('/Evaluate/'+Oid)};$scope.InsureDelete=function(){var Oid=localStorage.getItem("DeleteOrderId");var cancelReason=$('.checksActive').siblings().html();$.ajax({type:"post",url:"/order/cancelOrder",data:{"orderId":Oid,"cancelReason":cancelReason},datatype:"json",success:function(data){$.ajax({type:"post",url:"/order/getOrderList",data:{"pageIndex":1,"pageSize":20},datatype:"json",success:function(data){console.log(data);$scope.carmdAllLsits=data.object.list;console.log($scope.carmdAllLsits);$scope.$apply()}});$('.cancalState').fadeOut()}})};$scope.carmdAllLsits='';localStorage.setItem("orderStates",'');$.ajax({type:"post",url:"/order/getOrderList",data:{"pageIndex":1,"pageSize":20},datatype:"json",success:function(data){$('.spinner').fadeOut();$scope.carmdAllLsits=data.object.list;$scope.$apply()}});$scope.paycurri=function(orderIds){localStorage.setItem("orderIds",orderIds);$location.path('/ACinsure/')};var CDtabs=document.getElementsByClassName('MyOrders-tabs');for(var i=0;i<CDtabs.length;i+=1){CDtabs[i].onclick=function(){var indexx=$('.MyOrders-tabs').index($(this));for(var i=0;i<CDtabs.length;i+=1){$('.MyOrders-tabs').removeClass('MOactive');$('.MyOrders-tabs01').removeClass("active")}if(indexx==0){$('.spinner').fadeIn();$.ajax({type:"post",url:"/order/getOrderList",data:{"pageIndex":1,"pageSize":20},datatype:"json",success:function(data){$scope.carmdAllLsits=data.object.list;$scope.$apply()}});localStorage.setItem("orderStates",'')}else if(indexx==1||indexx==2||indexx==3){$('.spinner').fadeIn();$.ajax({type:"post",url:"/order/getOrderList",data:{"pageIndex":1,"pageSize":20,"status":indexx-1,},datatype:"json",success:function(data){$scope.carmdAllLsits=data.object.list;$scope.$apply()}});localStorage.setItem("orderStates",indexx-1)}pageSizes=20;$('.spinner').fadeOut();$(this).addClass('MOactive');$('.MyOrders-tabs01').eq(indexx).addClass("active")}}var pageSizes=20;$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()==$(document).height()){$('.spinner').fadeIn();var orderStates=localStorage.getItem("orderStates");pageSizes+=20;$.ajax({type:"post",url:"/order/getOrderList",data:{"pageIndex":1,"pageSize":pageSizes,"status":orderStates,},datatype:"json",success:function(data){$('.spinner').fadeOut();$scope.carmdAllLsits=data.object.list;$scope.$apply()}})}});}]).controller('OrderDetailsCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var Oid=$routeParams.ID;$scope.OrderListDetail='';$scope.failureTimeH='';$scope.failureTimeM='';$.ajax({type:"post",url:"/order/getOrderList",data:{"orderId":Oid,},datatype:"json",success:function(data){$scope.OrderListDetail=data.object.list[0];$scope.failureTimeH=parseInt(data.object.list[0].failureTime/1000/60/60);$scope.failureTimeM=parseInt(((data.object.list[0].failureTime/1000/60/60)-$scope.failureTimeH)*60);$scope.$apply()}});setInterval(function(){$.ajax({type:"post",url:"/order/getOrderList",data:{"orderId":Oid,},datatype:"json",success:function(data){$scope.failureTimeH=parseInt(data.object.list[0].failureTime/1000/60/60);$scope.failureTimeM=parseInt(((data.object.list[0].failureTime/1000/60/60)-$scope.failureTimeH)*60);$scope.$apply()}})},60000);var cancalReason=document.getElementsByClassName('cancalReason');for(var i=0;i<cancalReason.length;i+=1){cancalReason[i].onclick=function(){var indexx=$('.cancalReason').index($(this));for(var i=0;i<cancalReason.length;i+=1){$('.icon-Uncheck').removeClass('checksActive')}$('.icon-Uncheck').eq(indexx).addClass('checksActive')}}$scope.cancalReasonFadein=function(Oid){$('.cancalState').fadeIn();localStorage.setItem("DeleteOrderId",Oid)};$scope.cancalReasonFadeOut=function(){$('.cancalState').fadeOut()};$scope.InsureDelete=function(){var Oid=localStorage.getItem("DeleteOrderId");var cancelReason=$('.checksActive').siblings().html();$.ajax({type:"post",url:"/order/cancelOrder",data:{"orderId":Oid,"cancelReason":cancelReason},datatype:"json",success:function(data){$('.cancalState').fadeOut();alert(data.msg);$.ajax({type:"post",url:"/order/getOrderList",data:{"orderId":Oid,},datatype:"json",success:function(data){$scope.OrderListDetail=data.object.list[0];$scope.$apply()}})}})};$scope.goEvaluate=function(Oid){$location.path('/Evaluate/'+Oid)}}]).controller('refundApplyCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var HandFilmframe01=document.getElementsByClassName('HandFilmframe01');var HandFilmframe02=document.getElementsByClassName('HandFilmframe02');for(var i=0;i<HandFilmframe01.length;i+=1){HandFilmframe01[i].onclick=function(){var indexx=$('.HandFilmframe01').index($(this));for(var i=0;i<HandFilmframe01.length;i+=1){$('.HSC01').removeClass('checksActive')}$('.HSC01').eq(indexx).addClass('checksActive');$('#chulistate').val($('.HSC01-text').eq(indexx).html());$('.HandleState01').fadeOut()}}for(var i=0;i<HandFilmframe02.length;i+=1){HandFilmframe02[i].onclick=function(){var indexx=$('.HandFilmframe02').index($(this));for(var i=0;i<HandFilmframe02.length;i+=1){$('.HSC02').removeClass('checksActive')}$('.HSC02').eq(indexx).addClass('checksActive');$('#tuikuanR').val($('.HSC02-text').eq(indexx).html())}}$scope.HFframe01fadeIn=function(){$('.HandleState01').fadeIn()};$scope.HFframe02fadeIn=function(){$('.HandleState02').fadeIn()};$scope.HFframe02fadeOut=function(){$('.HandleState02').fadeOut();$('#tuikuanR').val('请选择')};$scope.HFframe02fadeOutR=function(){$('.HandleState02').fadeOut()}}]).controller('RefundDetailsCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.forceStop=function(){$('.HandleState02').fadeIn()};$scope.cancelForceStop=function(){$('.HandleState02').fadeOut()};$scope.insureForceStop=function(){$('.HandleState02').fadeOut();$('.HandleState01').fadeIn()};$scope.successForceStop=function(){$('.HandleState01').fadeOut()}}]).controller('EvaluateCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var Oid=$routeParams.ID;$scope.goback=function(){window.history.back()};var getStartFn=function(iss,a,b,c,d){var curriStart01=$(a).eq(iss).find(c);var Ev_Start01=$(a).eq(iss).find(d);for(var i=0;i<curriStart01.length;i+=1){curriStart01[i].onclick=function(){var indexx=curriStart01.index($(this));for(var i=0;i<Ev_Start01.length;i+=1){Ev_Start01[i].src="img/start0.png"}for(var i=0;i<=indexx;i+=1){Ev_Start01[i].src="img/start10.png"}$(this).siblings(b).html($(this).attr("data-grade"))}}};$scope.carmdAllLsits='';$.ajax({type:"post",url:"/courseEvaluate/evaluate",data:{"orderId":Oid,},datatype:"json",success:function(data){$scope.carmdAllLsits=data.object;$scope.$apply()}});$scope.info=[];var TTTT="";$scope.ReleaseEva=function(){var $index=$scope.carmdAllLsits.length;for(var i=0;i<$index;i+=1){$scope.info.splice(i,0,{"explain":$('.Ev_textareaIn').eq(i).val(),"serviceScore":$('.curriStartgrad02').eq(i).html(),"qualityScore":$('.curriStartgrad01').eq(i).html(),"orderItemId":$('.MO-listTop').eq(i).attr("data-orderItemId")})}TTTT=JSON.stringify($scope.info);$.ajax({type:"post",url:"/courseEvaluate/publishEvaluate",data:{"evaluates":TTTT,},datatype:"json",success:function(data){alert(data.msg);if(data.isSuccess){$location.path('/MyOrders/')}$scope.$apply()}})};$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){for(var i=0;i<$scope.carmdAllLsits.length;i+=1){getStartFn(i,'.qualityScore','.curriStartgrad01','.curriStart01','.Ev_Start01');getStartFn(i,'.serviceScore','.curriStartgrad02','.curriStart02','.Ev_Start02')}})}]).controller('MyCollectCtl',['$scope',function($scope){$scope.goback=function(){window.history.back()};$scope.CollectList='';$.ajax({type:"post",url:"/favorite/getFavoriteList",data:{},datatype:"json",success:function(data){$scope.CollectList=data.object;$scope.$apply()}});$scope.CollectDelete=function(id){$.ajax({type:"post",url:"/favorite/deleteFavorite",data:{"favoriteId":id},datatype:"json",success:function(data){$.ajax({type:"post",url:"/favorite/getFavoriteList",data:{},datatype:"json",success:function(data){$scope.CollectList=data.object;$scope.$apply()}});scartdelete('.MyCollect-container')}})};$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){scartdelete('.MyCollect-container')})}])})(angular);
(function(angular){'use strict';angular.module('Mnews',['ngRoute']).directive('onFinishRender',function($timeout){return{restrict:'A',link:function(scope,element,attr){if(scope.$last===true){$timeout(function(){scope.$emit('ngRepeatFinished')})}}}}).config(['$routeProvider',function($routeProvider){$routeProvider .when('/news/',{templateUrl:'news/news.html',controller:'newsCtl'}).when('/kedanDetails/:ID',{templateUrl:'kedan/kedanDetails.html',controller:'kedanDetailsCtl'}).when('/SeeClass/:ID',{templateUrl:'kedan/SeeClass.html',controller:'SeeClassCtl'}).when('/SCDetail/:ID',{templateUrl:'kedan/SeeClassDetails.html',controller:'SCDetailCtl'}).when('/StopClass/:ID',{templateUrl:'kedan/StopClass.html',controller:'StopClassCtl'}).when('/dynamic/:State',{templateUrl:'news/dynamic.html',controller:'dynamicCtl'}).when('/AllClassDe/:ID',{templateUrl:'news/AllClassDe.html',controller:'AllClassDeCtl'}).when('/LDetai01/:ID',{templateUrl:'news/LessonsDetails01.html',controller:'LDetai01Ctl'}).when('/LDetai03/:ID',{templateUrl:'news/LessonsDetails03.html',controller:'LDetai03Ctl'}).when('/SingleClassDetail/:ID',{templateUrl:'news/SingleClassDetail.html',controller:'SingleClassDetailCtl'})}]).controller('newsCtl',['$scope','$route','$routeParams','$location',function($scope,$route,$routeParams,$location){var PTNumber=1;var PTSize=30;var newstabs=document.getElementsByClassName("newstabs");for(var i=0;i<newstabs.length;i+=1){newstabs[i].onclick=function(){var indexx=$(".newstabs").index($(this));for(var i=0;i<newstabs.length;i+=1){$(".newstabs").removeClass("active");$(".newstabs1").removeClass("active")}$(this).addClass("active");$(".newstabs1").eq(indexx).addClass("active")}}$scope.newslist=0;$.ajax({type:"post",url:"/c/chat",data:{},datatype:"json",success:function(data){$scope.newslist=data;$scope.$apply()}});$scope.teatherlist='';$.ajax({type:"post",url:"/p/getFriendsByParent",data:{"pageNumber":1,"pageSize":30,},datatype:"json",success:function(data){$scope.teatherlist=data.list;$scope.$apply()}});$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()>$(document).height()+40){PTSize+20;$.ajax({type:"post",url:"/p/getFriendsByParent",data:{"pageNumber":PTNumber,"pageSize":PTSize,},datatype:"json",success:function(data){$scope.teatherlist=data.list;$scope.$apply()}})}});$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){var SingleOnOff=document.getElementsByClassName("SingleClass-right");for(var i=0;i<SingleOnOff.length;i+=1){var a=1;SingleOnOff[i].onclick=function(){a+=1;var indexx=$(".SingleClass-right").index($(this));for(var i=0;i<SingleOnOff.length;i+=1){$(".SingleDetails").slideUp("fast");$(".onoroff-open").addClass("opentxt");$(".onoroff-Close").removeClass("opentxt");$('.showorhide').removeClass("showorhide-active")}if(a%2==0){$(".SingleDetails").eq(indexx).stop(true,false).slideToggle("slow");$(".onoroff-open").eq(indexx).toggleClass("opentxt");$(".onoroff-Close").eq(indexx).toggleClass("opentxt");$('.showorhide').eq(indexx).toggleClass("showorhide-active")}}}});$scope.kedanlist='';$scope.kedanshow=function(id){var TeatherID=id;$.ajax({type:"post",url:"/c/curriculum/getCurriculumList",data:{"pageNumber":1,"pageSize":999,"targetId":TeatherID,},datatype:'json',success:function(data){$scope.kedanlist=data.content.list;$scope.$apply()}})};$scope.stateChange=function(id,state){var kedanID=id;var states=state;$.ajax({type:"post",url:"/c/curriculum/updateCurriculumState",data:{"currId":kedanID,"stateCode":states,},datatype:"json",success:function(data){window.location.reload()}})};$scope.refuse=function(id){var kedanID=id;$.ajax({type:"post",url:"/c/curriculum/refuseCurriculum",data:{"currId":kedanID,},datatype:"json",success:function(data){window.location.reload()}})};$scope.assess=function(tid,cid,iss,issadd){var teatherID=tid;var kedanID=cid;if(iss==0){$location.path('/assIni/'+teatherID+'/'+kedanID)}else if(iss==1&&issadd==0){$location.path('/assAgain/'+teatherID+'/'+kedanID)}}}]).controller('kedanDetailsCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var currId=$routeParams.ID;$scope.typeText='';$scope.studentName='';$scope.subjectText='';$scope.grade='';$scope.hour_subsidy='';$scope.total_hours='';$scope.frequency='';$scope.placeText='';$scope.address='';$scope.order_amount='';$scope.penaltyAmount='';$scope.in_time='';$scope.memo='';$scope.state='';$scope.currId=currId;$.ajax({type:"post",url:"/c/curriculum/getCurriculumInfo",data:{"currId":currId},datatype:"json",success:function(data){$scope.typeText=data.object.typeText;$scope.studentName=data.object.student_name;$scope.subjectText=data.object.subjectText;$scope.grade=data.object.grade;$scope.hour_subsidy=data.object.hour_subsidy;$scope.total_hours=data.object.total_hours;$scope.frequency=data.object.frequency;$scope.placeText=data.object.placeText;$scope.address=data.object.address;$scope.order_amount=data.object.order_amount;$scope.penaltyAmount=data.object.penaltyAmount;$scope.in_time=data.object.in_time;$scope.memo=data.object.memo;$scope.state=data.object.state;$scope.$apply()}});$scope.stateChange=function(state){var states=state;$.ajax({type:"post",url:"/c/curriculum/updateCurriculumState",data:{"currId":currId,"stateCode":states,},datatype:"json",success:function(data){$location.path('/dynamic/'+1);$scope.$apply()}})}}]).controller('SeeClassCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var currId=$routeParams.ID;$scope.keciList='';$.ajax({type:"post",url:"/c/curriculumClass/getClassListBycurr",data:{"currId":currId,},datatype:"json",success:function(data){$scope.keciList=data.object;$scope.$apply()}});$scope.responseClass=function(classId,state){var states=state;var classId=classId;$.ajax({type:"post",url:"/c/curriculumClass/parentCheckClass",data:{"classId":classId,"state":states,},datatype:"json",success:function(data){if(state==3){alert("您已同意该课次")}else if(state==4){alert("您拒绝了该课次")}window.location.reload();$scope.$apply()}})}}]).controller('SCDetailCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var classId=$routeParams.ID;$.ajax({type:"post",url:"/c/curriculumClass/getClassInfo",data:{"classId":classId,},datatype:"json",success:function(data){$scope.kecis=data.object;$scope.$apply()}})}]).controller('StopClassCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var currId=$routeParams.ID;$scope.submitResure=function(){var resure=$("textarea").val();if(resure){$.ajax({type:"post",url:"/c/curriculum/updateCurriculumState",data:{"currId":currId,"stateCode":14,"stopReason":resure,},datatype:"json",success:function(data){alert("协商请求已发送，请耐心等待老师回复");$location.path('/dynamic/'+1);$scope.$apply()}})}else{alert("请填写您中止的原因")}}}]).controller('dynamicCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var state1234=$routeParams.State;var CDtabs=document.getElementsByClassName('DY-tabs');for(var i=0;i<CDtabs.length;i+=1){for(var i=0;i<CDtabs.length;i+=1){$('.DY-tabs').removeClass('SCactive');$('.DY-tabs01').removeClass("active")}$('.DY-tabs').eq(state1234).addClass('SCactive');$('.DY-tabs01').eq(state1234).addClass("active")}tabsfn('DY-tabs','.DY-tabs','.DY-tabs01','SCactive');var PTNumber=1;var PTSize=30;$scope.teatherlist='';$.ajax({type:"post",url:"/p/getFriendsByParent",data:{"pageNumber":1,"pageSize":30,},datatype:"json",success:function(data){$scope.teatherlist=data.list;$scope.$apply()}});$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()==$(document).height()){PTSize+=20;$.ajax({type:"post",url:"/p/getFriendsByParent",data:{"pageNumber":PTNumber,"pageSize":PTSize,},datatype:"json",success:function(data){$scope.teatherlist=data.list;$scope.$apply()}})}});$scope.$on('ngRepeatFinished',function(ngRepeatFinishedEvent){var SingleOnOff=document.getElementsByClassName("SingleClass-right");for(var i=0;i<SingleOnOff.length;i+=1){var a=1;SingleOnOff[i].onclick=function(){a+=1;var indexx=$(".SingleClass-right").index($(this));for(var i=0;i<SingleOnOff.length;i+=1){$(".SingleDetails").slideUp("fast");$(".onoroff-open").addClass("opentxt");$(".onoroff-Close").removeClass("opentxt");$('.showorhide').removeClass("showorhide-active")}if(a%2==0){$(".SingleDetails").eq(indexx).stop(true,false).slideToggle("slow");$(".onoroff-open").eq(indexx).toggleClass("opentxt");$(".onoroff-Close").eq(indexx).toggleClass("opentxt");$('.showorhide').eq(indexx).toggleClass("showorhide-active")}}}});$scope.kedanlist='';$scope.kedanshow=function(id){var TeatherID=id;$.ajax({type:"post",url:"/c/curriculum/getCurriculumList",data:{"pageNumber":1,"pageSize":999,"targetId":TeatherID,},datatype:'json',success:function(data){$scope.kedanlist=data.content.list;$scope.$apply()}})};$scope.stateChange=function(id,state){var kedanID=id;var states=state;$.ajax({type:"post",url:"/c/curriculum/updateCurriculumState",data:{"currId":kedanID,"stateCode":states,},datatype:"json",success:function(data){$location.path('/dynamic/'+1)}})};$scope.refuse=function(id){var kedanID=id;$.ajax({type:"post",url:"/c/curriculum/refuseCurriculum",data:{"currId":kedanID,},datatype:"json",success:function(data){$location.path('/dynamic/'+1)}})};$scope.assess=function(tid,cid,iss,issadd){var teatherID=tid;var kedanID=cid;if(iss==0){$location.path('/assIni/'+teatherID+'/'+kedanID)}else if(iss==1&&issadd==0){$location.path('/assAgain/'+teatherID+'/'+kedanID)}};$scope.CourseList='';$.ajax({type:"post",url:"/orderItem/getCourseListByParent",data:{},datatype:"json",success:function(data){$scope.CourseList=data.object;$scope.CourseListlength=$scope.CourseList.length;$scope.$apply()}});$scope.getCourseDetail=function(Cstate,CID){if(Cstate==0||Cstate==1){$location.path('/LDetai01/'+CID)}else if(Cstate==2||Cstate==3){$location.path('/LDetai03/'+CID)}};$scope.newslist=0;$.ajax({type:"post",url:"/c/chat",data:{},datatype:"json",success:function(data){$scope.newslist=data;$scope.$apply()}})}]).controller('AllClassDeCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var orderItemId=$routeParams.ID;$scope.goback=function(){$location.path('/dynamic/'+2)};$scope.cancelForceStop=function(){$('.HandleState04').fadeOut()};$scope.SubmitRReason=function(Lid){var lessonID=localStorage.getItem('LID');var RReason=$('#RRReason').val();$.ajax({type:"post",url:"/cramLessonItem/rejectCourse",data:{"cramLessonItemId":lessonID,"reason":RReason,},datatype:"json",success:function(data){alert(data.msg);$('.HandleState04').fadeOut();$scope.$apply()}})};$scope.RefuseRefund=function(Lid){$('.HandleState04').fadeIn();localStorage.setItem("LID",Lid)};$scope.confirmLesson=function(Lid){$.ajax({type:"post",url:"/cramLessonItem/confirmCourse",data:{"cramLessonItemId":Lid,},datatype:"json",success:function(data){alert(data.msg);$.ajax({type:"post",url:"/cramLessonItem/getLessonItemListByParent",data:{"orderItemId":orderItemId,},datatype:"json",success:function(data){$scope.LessonItemList=data.object;$scope.LessonItemListlength=$scope.LessonItemList.length;$scope.$apply()}});$scope.$apply()}})};$scope.LessonItemList='';$scope.LessonItemListlength='';$.ajax({type:"post",url:"/cramLessonItem/getLessonItemListByParent",data:{"orderItemId":orderItemId,},datatype:"json",success:function(data){$scope.LessonItemList=data.object;$scope.LessonItemListlength=$scope.LessonItemList.length;$scope.$apply()}});$scope.getCourseDetail=function(Cstate,CID){if(Cstate==0||Cstate==1){$location.path('/LDetai01/'+CID)}else if(Cstate==2||Cstate==3){$location.path('/LDetai03/'+CID)}}}]).controller('LDetai01Ctl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var cramLessonItemId=$routeParams.ID;$scope.goback=function(courserId){$location.path('/AllClassDe/'+courserId)};$scope.cramLessonDetail='';$.ajax({type:"post",url:"/cramLessonItem/getLessonItemByParent",data:{"cramLessonItemId":cramLessonItemId,},datatype:"json",success:function(data){$scope.cramLessonDetail=data.object;console.log(data);$scope.$apply()}})}]).controller('LDetai03Ctl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var cramLessonItemId=$routeParams.ID;$scope.goback=function(courserId){$location.path('/AllClassDe/'+courserId)};$scope.cramLessonDetail='';$.ajax({type:"post",url:"/cramLessonItem/getLessonItemByParent",data:{"cramLessonItemId":cramLessonItemId,},datatype:"json",success:function(data){$scope.cramLessonDetail=data.object;$scope.$apply()}})}]).controller('SingleClassDetailCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var orderItemId=$routeParams.ID;$scope.goback=function(){$location.path('/dynamic/'+2)};$scope.orderIDetail='';$.ajax({type:"post",url:"/orderItem/getCourseInfoByOrderItem",data:{"orderItemId":orderItemId,},datatype:"json",success:function(data){$scope.orderIDetail=data.object;$scope.$apply()}})}])})(angular);
(function(angular){'use strict';angular.module('Mshangmenjiajiao',['ngRoute']).config(['$routeProvider',function($routeProvider){$routeProvider.when('/shangmenjiajiao/',{templateUrl:'shangmenjiajiao/shangmenjiajiao.html',controller:'shangmenjiajiaoCtl'})}]).controller('shangmenjiajiaoCtl',['$scope',function($scope){tabsfn('zoneBody','.zoneBody','.zoneBody01','tabItemactive');tabsfn('regionBody','.regionBody','.regionBody01','tabItemactive');var smjjtab=document.getElementsByClassName("shangmenjiajiao-tablist");for(var i=0;i<smjjtab.length;i+=1){smjjtab[i].onclick=function(){var index=$(".shangmenjiajiao-tablist").index($(this));for(var i=0;i<smjjtab.length;i+=1){$(".icon-smjj-l").removeClass("smjjactive-san")}$(".icon-smjj-l").eq(index).addClass("smjjactive-san")};smjjtab[i].onmouseleave=function(){$(".icon-smjj-l").removeClass("smjjactive-san")}}$scope.ifAreas='';$scope.ifAreasname='';$.post("/p/getParentHome",{},function(data){$scope.ifAreas=data.content.parent_follow_area;if($scope.ifAreas){$scope.ifAreasname=data.content.parent_follow_area_name}$scope.$apply()});var datatext={"pageIndex":1,"pageSize":count};loadteather(datatext);var fields=$(".smjj-change").serializeArray();var orderBy="";var order="";if(fields[2].value=='1'){order="star.starSum";orderBy='desc'}else if(fields[2].value=='2'){order="star.starSum";orderBy=''}$scope.selectarea=function(){fields=$(".smjj-change").serializeArray();orderBy="";order="";if(fields[2].value=='1'){order="star.starSum";orderBy='desc'}else if(fields[2].value=='2'){order="star.starSum";orderBy=''}datatext={"pageIndex":1,"pageSize":count,"areaId":fields[0].value,"subjectId":fields[1].value,"sex":fields[3].value,"order":order,"orderBy":orderBy};$('#search-list').empty();loadteather(datatext)};$scope.searchdata="";$scope.search=function(searchinput){$scope.searchdata=searchinput;var data={"pageIndex":1,"pageSize":count,"keyword":$scope.searchdata};$('#search-list').empty();loadteather(data)};$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()==$(document).height()){$scope.searchdata=$('.a1-01sinput').val();fields=$(".smjj-change").serializeArray();page+=1;datatext={"pageIndex":page,"pageSize":count,"areaId":fields[0].value,"subjectId":fields[1].value,"sex":fields[3].value,"order":order,"orderBy":orderBy,"keyword":$scope.searchdata};loadteather(datatext)}})}])})(angular);
(function(angular){'use strict';angular.module('Mteatherdetails',['ngRoute']).config(['$routeProvider',function($routeProvider){$routeProvider.when('/teatherdetails/:id',{templateUrl:'teatherdetails/teatherdetails.html',controller:'teatherdetailsCtl'})}]).controller('teatherdetailsCtl',['$scope','$location','$routeParams','$route',function($scope,$location,$routeParams,$route){var tabs1=document.getElementsByClassName("presentation");var tabs1data=document.getElementsByClassName("presentation1");for(var i=0;i<tabs1.length;i+=1){tabs1[i].onclick=function(){var index=$(".presentation").index($(this));for(var i=0;i<tabs1.length;i+=1){$(".presentation").removeClass("active");$(".tabs1-teatherdata").removeClass("active")}$(this).addClass("active");$(".tabs1-teatherdata").eq(index).addClass("active")}}for(var i=0;i<tabs1data.length;i+=1){tabs1data[i].onclick=function(){var indexx=$(".presentation1").index($(this));for(var i=0;i<tabs1data.length;i+=1){$(".presentation1").removeClass("active");$(".presentation11").removeClass("active")}$(this).addClass("active");$(".presentation11").eq(indexx).addClass("active")}}var id=$routeParams.id;$scope.city="";$scope.memberStar="";$scope.name="";$scope.experience='';$scope.self_description='';$scope.avatar='';$scope.ranking="";$scope.resume='';$scope.sex='';$scope.education='';$scope.teacher_score='';$scope.graduate_school='';$scope.subjects='';$scope.myAreas='';$scope.starCount='';$scope.isFriend=false;$scope.redStar="";$scope.blueStar="";$scope.blackStar="";$.ajax({type:"post",url:"/p/getTeacherInfo",data:{"teacherId":id},datatype:"json",success:function(data){$scope.city=data.city;$scope.memberStar=data.memberStar;$scope.name=data.name;$scope.experience=data.experience;$scope.self_description=data.self_description;if(!$scope.self_description){$scope.self_description="他还没有填写自我描述"}$scope.avatar=data.avatar;$scope.ranking=data.ranking;$scope.resume=data.resume;if(!$scope.resume){$scope.resume="他还没有填写过往经历"}$scope.sex=data.sex;$scope.education=data.education;$scope.teacher_score=data.teacher_score;$scope.graduate_school=data.graduate_school;$scope.subjects=data.subjects;console.log(data.subjects);$scope.myAreas=data.myAreas;$scope.starCount=data.starCount;$scope.isFriend=data.isFriend;$scope.redStar=[];$scope.blueStar=[];$scope.blackStar=[];var starlist=document.getElementsByClassName("media-star");for(var i=0;i<data.totalFjStar;i+=1){$scope.redStar.push(i)}for(var i=0;i<data.totalStar;i+=1){$scope.blueStar.push(i)}for(var i=0;i<(14-data.totalStar-data.totalFjStar);i+=1){$scope.blackStar.push(i)}$scope.$apply()}});$scope.AddTeather=function(){$.ajax({type:"post",url:"/p/addFriends",data:{"teacherId":id},datatype:"json",success:function(data){$scope.isFriend=true;$scope.$apply()}})};var PTNumber=1;var PTSize=30;$scope.asselist='';$scope.average='';$scope.count='';var order='';var getasse=function(){$.ajax({type:"post",url:"/comment/getTeacherCommentByParent",data:{"teacherId":id,"pageNumber":1,"pageSize":30,"order":order},datatype:"json",success:function(data){$scope.asselist=data.object.result.list;$scope.average=data.object.average;$scope.count=data.object.count;$scope.$apply()}})};getasse();$scope.getorderass=function(asby){order=asby;getasse()};$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()>$(document).height()+40){PTSize+20;$.ajax({type:"post",url:"/comment/getTeacherCommentByParent",data:{"teacherId":id,"pageNumber":PTNumber,"pageSize":PTSize,"order":order},datatype:"json",success:function(data){$scope.asselist=data.object.result.list;$scope.$apply()}})}})}])})(angular);
(function(angular){'use strict';angular.module('Mvip',['ngRoute']).config(['$routeProvider',function($routeProvider){$routeProvider.when('/vip/',{templateUrl:'vip/vip.html',controller:'vipCtl'})}]).controller('vipCtl',['$scope',function($scope){$scope.viptype='m';$scope.paytype=1;$scope.viptime=1;$scope.Totalamount=30;$scope.originalPrice=360;$scope.yuanonoff=true;$scope.vipService=function($event){$($event.target).toggleClass('greedborder-active')};$scope.monthandyear=function($event,viptype){$scope.viptype=viptype;$scope.viptime=1;if($scope.viptype=="y"&&$scope.viptime>0){if($scope.viptime==1){$scope.Totalamount=100;$scope.originalPrice=360}}else if($scope.viptype=="m"&&$scope.viptime>0){if($scope.viptime==1){$scope.Totalamount=30}}else{$scope.Totalamount="查询异常";$scope.yuanonoff=false}$(".tehui").click(function(e){e.stopPropagation();e.preventDefault()});$('.month-year').removeClass('greedborder-active');$($event.target).addClass('greedborder-active');$scope.page=$event.target.getAttribute('data-vip');$('.month-year-show').css('display','none');$('.month-year-show').eq($scope.page).css('display','block')};$scope.paystyle=function($event,paytype){$scope.paytype=paytype;$('.pay-style').removeClass('greedborder-active');$($event.target).addClass('greedborder-active')};$scope.name='';$scope.balance='';$scope.parentVip='';$scope.sex='';$scope.avatar='';$scope.vip_end_time='';var resetvip=function(){$.ajax({type:"post",url:"/p/getMyInfo",data:{},datatype:"json",success:function(data){$scope.name=data.name;$scope.balance=data.balance;$scope.parentVip=data.parentVip;$scope.sex=data.sex;$scope.avatar=data.avatar;$scope.vip_end_time=data.parentVipEndTime;$scope.$apply()}})};resetvip();$scope.inputviptime=function(viptime){$scope.viptime=viptime;$.ajax({type:"post",url:"/c/getVipPrice",data:{"type":$scope.viptype,"no":viptime},datatype:"json",success:function(data){$scope.Totalamount=data.msg;$scope.originalPrice=data.originalPrice;$scope.yuanonoff=data.isSuccess;if($scope.viptype=="y"&&$scope.viptime>0){if($scope.viptime==1){$scope.Totalamount=100;$scope.originalPrice=360}}else if($scope.viptype=="m"&&$scope.viptime>0){if($scope.viptime==1){$scope.Totalamount=30}}else{$scope.Totalamount="查询异常";$scope.yuanonoff=false}$scope.$apply()}})};$scope.submitpay=function(Totalamount,balance){if($scope.paytype==1){window.location.href="/c/pay/openVipByWechatPay?type="+$scope.viptype+"&no="+$scope.viptime+"&identity=1"}else if($scope.paytype==2){if(Totalamount<=balance){$.ajax({type:"post",url:"/c/openVip",data:{"type":$scope.viptype,"no":$scope.viptime,"identity":1},datatype:"json",success:function(data){alert(data.msg);resetvip();$scope.$apply()}})}else{alert("余额不足，使用微信支付或先充值")}}}}])})(angular);
(function(angular){'use strict';angular.module('Mwallet',['ngRoute']).config(['$routeProvider',function($routeProvider){$routeProvider .when('/wallet/',{templateUrl:'wallet/wallet.html',controller:'walletCtl'}).when('/FWater/',{templateUrl:'FlowingWater/FlowingWater.html',controller:'FlowingWaterCtl'}).when('/WDCash/',{templateUrl:'wallet/withdrawCash.html',controller:'wdCashCtl'}).when('/WDCRecord/',{templateUrl:'FlowingWater/wdCRecord.html',controller:'wCashReCtl'}).when('/feedback/',{templateUrl:'wallet/feedback.html',controller:'feedbackCtl'}).when('/duihuanjilu/',{templateUrl:'FlowingWater/duihuanjilu.html',controller:'duihuanjiluCtl'}).when('/payment/:MN/:ID',{templateUrl:'wallet/payment.html',controller:'paymentCtl'}).when('/noCard/',{templateUrl:'wallet/noCard.html',controller:'NoCardCtl'}).when('/RCard/',{templateUrl:'wallet/reviseCard.html',controller:'RCardCtl'}).when('/recharge/',{templateUrl:'wallet/recharge.html',controller:'rechargeCtl'})}]).controller('walletCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.users='';$.ajax({type:"post",url:"/c/userInfo",data:{},datatype:"json",success:function(data){$scope.users=data;$scope.$apply()}});$scope.Withdrawalss=function(){$.ajax({type:"post",url:"/bankCard/getBankCard",data:{},datatype:"json",success:function(data){if(data.object){$location.path('/WDCash/')}else if(!data.object){$location.path('/noCard/')}$scope.$apply()}})}}]).controller('FlowingWaterCtl',['$scope',function($scope){var PTNumber=1;var PTSize=30;$scope.fwlists='';$scope.totalRow=1000;$.ajax({type:"post",url:"/balanceRecord/getBalanceRecordList",data:{"pageIndex":1,"pageSize":PTSize,},datatype:"json",success:function(data){$scope.totalRow=data.totalRow;$scope.fwlists=data.list;console.log(data);$scope.$apply()}});$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()>$(document).height()+40){PTSize+20;$.ajax({type:"post",url:"/p/getFriendsByParent",data:{"pageIndex":PTNumber,"pageSize":PTSize,},datatype:"json",success:function(data){$scope.fwlists=data.list;$scope.$apply()}})}})}]).controller('wdCashCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.cardInfo='';$.ajax({type:"post",url:"/bankCard/getBankCard",data:{},datatype:"json",success:function(data){$scope.cardInfo=data.object;$scope.$apply()}});$scope.usersInfo='';$.ajax({type:"post",url:"/c/userInfo",data:{},datatype:"json",success:function(data){$scope.usersInfo=data;$scope.$apply()}});$scope.wDCmoney=function(){var amounts=$('.MoneyNumber').val();$.ajax({type:"post",url:"/withdraw/withdrawalApply",data:{"amount":amounts},datatype:"json",success:function(data){alert(data.msg);if(data.isSuccess){location.reload()}$scope.$apply()}})}}]).controller('wCashReCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var PTNumber=1;var PTSize=30;$scope.totalRow=1000;$scope.wdCRecords='';$.ajax({type:"post",url:"/withdraw/withdrawList",data:{"pageNumber":1,"pageSize":30,},datatype:"json",success:function(data){$scope.wdCRecords=data.list;$scope.totalRow=data.totalRow;$scope.$apply()}});$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()>$(document).height()+40){PTSize+20;$.ajax({type:"post",url:"/withdraw/withdrawList",data:{"pageNumber":PTNumber,"pageSize":PTSize,},datatype:"json",success:function(data){$scope.wdCRecords=data.list;$scope.$apply()}})}})}]).controller('feedbackCtl',['$scope',function($scope){$scope.submitfeedback=function(){var feedback=$(".feedback textarea").val();if(feedback){$.ajax({type:"post",url:"/c/feedbackSave",data:{"content":feedback},datatype:"json",success:function(data){}});alert('感谢您提出的建议和意见，我们将努力做得更好');window.location.reload()}else{alert('请填写您的建议和意见')}}}]).controller('duihuanjiluCtl',['$scope',function($scope){}]).controller('paymentCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){var paynumbers=$routeParams.MN;var currId=$routeParams.ID;$scope.paynumbers=paynumbers;$scope.payWei=function(){window.location.href="/c/pay/payCurriculumByWechat?currId="+currId};$scope.payWal=function(){$.ajax({type:"post",url:"/c/curriculum/payCurriculum",data:{"currId":currId,},datatype:"json",success:function(data){alert(data.msg);$location.path('/dynamic/');$scope.$apply()}})}}]).controller('NoCardCtl',['$scope',function($scope){}]).controller('RCardCtl',['$scope','$route','$location','$routeParams',function($scope,$route,$location,$routeParams){$scope.reviCard=function(){var cardinfo=$('.reCardinfo').serializeArray();$.ajax({type:"post",url:"/bankCard/tiedCard",data:{"bank.bank_name":cardinfo[0].value,"bank.branch_name":cardinfo[1].value,"bank.card_number":cardinfo[2].value,"bank.username":cardinfo[3].value},datatype:"json",success:function(data){alert(data.msg);$location.path('/WDCash/');$scope.$apply()}})}}]).controller('rechargeCtl',['$scope',function($scope){}])})(angular);