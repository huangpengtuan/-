(function(angular){'use strict';angular.module('Mshangmenjiajiao',['ngRoute']).config(['$routeProvider',function($routeProvider){$routeProvider.when('/shangmenjiajiao/',{templateUrl:'shangmenjiajiao/shangmenjiajiao.html',controller:'shangmenjiajiaoCtl'})}]).controller('shangmenjiajiaoCtl',['$scope',function($scope){tabsfn('zoneBody','.zoneBody','.zoneBody01','tabItemactive');tabsfn('regionBody','.regionBody','.regionBody01','tabItemactive');var smjjtab=document.getElementsByClassName("shangmenjiajiao-tablist");for(var i=0;i<smjjtab.length;i+=1){smjjtab[i].onclick=function(){var index=$(".shangmenjiajiao-tablist").index($(this));for(var i=0;i<smjjtab.length;i+=1){$(".icon-smjj-l").removeClass("smjjactive-san")}$(".icon-smjj-l").eq(index).addClass("smjjactive-san")};smjjtab[i].onmouseleave=function(){$(".icon-smjj-l").removeClass("smjjactive-san")}}$scope.ifAreas='';$scope.ifAreasname='';$.post("/p/getParentHome",{},function(data){$scope.ifAreas=data.content.parent_follow_area;if($scope.ifAreas){$scope.ifAreasname=data.content.parent_follow_area_name}$scope.$apply()});var datatext={"pageIndex":1,"pageSize":count};loadteather(datatext);var fields=$(".smjj-change").serializeArray();var orderBy="";var order="";if(fields[2].value=='1'){order="star.starSum";orderBy='desc'}else if(fields[2].value=='2'){order="star.starSum";orderBy=''}$scope.selectarea=function(){fields=$(".smjj-change").serializeArray();orderBy="";order="";if(fields[2].value=='1'){order="star.starSum";orderBy='desc'}else if(fields[2].value=='2'){order="star.starSum";orderBy=''}datatext={"pageIndex":1,"pageSize":count,"areaId":fields[0].value,"subjectId":fields[1].value,"sex":fields[3].value,"order":order,"orderBy":orderBy};$('#search-list').empty();loadteather(datatext)};$scope.searchdata="";$scope.search=function(searchinput){$scope.searchdata=searchinput;var data={"pageIndex":1,"pageSize":count,"keyword":$scope.searchdata};$('#search-list').empty();loadteather(data)};$(window).bind("scroll",function(){if($(document).scrollTop()+$(window).height()==$(document).height()){$scope.searchdata=$('.a1-01sinput').val();fields=$(".smjj-change").serializeArray();page+=1;datatext={"pageIndex":page,"pageSize":count,"areaId":fields[0].value,"subjectId":fields[1].value,"sex":fields[3].value,"order":order,"orderBy":orderBy,"keyword":$scope.searchdata};loadteather(datatext)}})}])})(angular);